[{"name": "PS-24-0000012572", "owner": "Administrator", "creation": "2024-10-05 08:49:34.553693", "modified": "2024-10-15 16:19:15.548756", "modified_by": "Administrator", "docstatus": 0, "idx": 1, "section_title": "BreadCrumb web bán hàng 1", "route": "breadcrumb web b-n h-ng 1", "class_name": "ivflmqlp", "is_template": 0, "section_group": "Trang web bán hàng 1", "is_full_width": 0, "allow_clone": 1, "is_clone": 0, "section_type": "Static Section", "view_type": "", "device_type": "Web & Mobile", "is_editable": 0, "is_login_required": 0, "content_type": "", "fetch_product": 0, "section_name": "BreadCrumb web bán hàng 1", "image_option": "Same Document", "allow_update_to_style": 0, "query_by_category": 0, "no_of_records": 0, "sort_by": "DESC", "dynamic_data": 1, "display_data_randomly": 0, "image": "/files/Screenshot from 2024-10-04 16-07-41.png", "enable_view_more": 0, "custom_section_data": "[]", "bg_type": "Color", "bg_color": "#ffffff", "web_template": "<div class=\"bg-[white] container mb-[60px] rounded-b-md border border-solid border-grey\">\n          <div\n            class=\"breadcumb mx-auto container py-4 flex flex-wrap flex-row items-center justify-between gap-2\"\n          >\n                       <span class=\"text-sm font-semibold text-[#4B5966]\">{{ title }}</span>\n            <div class=\"flex flex-wrap flex-row items-center gap-2\">\n            {% for brc in breadcrumb %} \n             {% if loop.first %}\n               <a href=\"{{ brc.route }}\" class=\"text-sm font-normal text-[#212B36]\">{{ brc.menu }}</a>\n             {% elif not loop.last %}\n            <img\n              src=\"/files/no-active-arrown.svg\"\n              alt=\"\"\n              class=\"w-6 h-6\"\n            />\n            <a href=\"{{ brc.route }}\" class=\"text-sm font-normal text-[#212B36]\">{{ brc.menu }}</a>\n             {% else %}\n            <img\n              src=\"/files/active-arrown.svg\"\n              alt=\"\"\n              class=\"w-6 h-6\"\n            />\n            <a href=\"{{ brc.route }}\" class=\"text-sm font-normai text-[#1877F2]\"\n              >{{ brc.menu }}</a\n            >\n           {% endif %}\n           {% endfor %}\n           </div>\n\n          </div>\n        </div>", "doctype": "Page Section", "content": [{"name": "8dfa90c6d4", "owner": "Administrator", "creation": "2024-10-05 08:49:34.553693", "modified": "2024-10-15 16:19:15.548756", "modified_by": "Administrator", "docstatus": 0, "idx": 1, "field_label": "Đường dẫn", "field_key": "breadcrumb", "field_type": "List", "content_type": "Data", "allow_update_to_style": 0, "content": "[{\"menu\":\"Trang chủ\",\"route\":\"/home\",\"idx\":1},{\"menu\":\"Quản lý tài khoản\",\"route\":\"#\",\"idx\":2}]", "fields_json": "[{\"field_label\":\"Tiêu đề\",\"field_key\":\"menu\",\"field_type\":\"Text\",\"idx\":1},{\"field_label\":\"Đường dẫn\",\"field_key\":\"route\",\"field_type\":\"Text\",\"idx\":2}]", "parent": "PS-24-0000012572", "parentfield": "content", "parenttype": "Page Section", "doctype": "Section Content"}, {"name": "ca281cf7c5", "owner": "Administrator", "creation": "2024-10-05 08:49:34.553693", "modified": "2024-10-15 16:19:15.548756", "modified_by": "Administrator", "docstatus": 0, "idx": 2, "field_label": "Tiêu đề", "field_key": "title", "field_type": "Text", "content_type": "Data", "allow_update_to_style": 0, "content": "Quản lý tài khoản", "parent": "PS-24-0000012572", "parentfield": "content", "parenttype": "Page Section", "doctype": "Section Content"}], "section_column_css": [], "column_index": 1}, {"name": "PS-24-0000014595", "owner": "Administrator", "creation": "2024-10-15 14:55:13.563422", "modified": "2024-10-16 09:41:40.791886", "modified_by": "Administrator", "docstatus": 0, "idx": 3, "section_title": "Account Administration", "route": "account administration", "class_name": "ujrcozlv", "is_template": 1, "section_group": "Trang web bán hàng 1", "is_full_width": 0, "allow_clone": 1, "is_clone": 0, "section_type": "Static Section", "view_type": "", "device_type": "Web & Mobile", "is_editable": 0, "is_login_required": 0, "content_type": "", "fetch_product": 0, "section_name": "Account Administration", "image_option": "Same Document", "allow_update_to_style": 0, "query_by_category": 0, "no_of_records": 0, "sort_by": "DESC", "dynamic_data": 1, "display_data_randomly": 0, "image": "/files/Screenshot from 2024-07-02 16-28-58.png", "enable_view_more": 0, "custom_section_data": "[]", "bg_type": "Color", "bg_color": "#ffffff", "web_template": "<div class=\"my-10\">\n      <div class=\"flex flex-col xl:flex-row\">\n        <nav class=\"w-full xl:w-1/5 bg-white p-4\">\n          <ul>\n            <li class=\"mb-2\">\n              <button class=\"w-full text-base font-normal leading-[22px] rounded-lg text-center xl:text-left p-2\"\n                onclick=\"showSection('account-info')\" data-section=\"account-info\">\n                Thông tin tài khoản\n              </button>\n            </li>\n            <li class=\"mb-2\">\n              <button class=\"w-full text-base font-normal leading-[22px] rounded-lg text-center xl:text-left p-2\"\n                onclick=\"showSection('my-orders')\" data-section=\"my-orders\">\n                Đơn hàng của tôi\n              </button>\n            </li>\n            <li class=\"mb-2\">\n              <button class=\"w-full text-base font-normal leading-[22px] rounded-lg text-center xl:text-left p-2\"\n                onclick=\"showSection('change-password')\" data-section=\"change-password\">\n                Đổi mật khẩu\n              </button>\n            </li>\n            <li class=\"mb-2\">\n              <button class=\"w-full text-base font-normal leading-[22px] rounded-lg text-center xl:text-left p-2\"\n                onclick=\"showSection('logout')\" data-section=\"logout\">\n                Đăng xuất\n              </button>\n            </li>\n          </ul>\n        </nav>\n        <div class=\"w-full xl:w-4/5 p-4\">\n          <div id=\"account-info\" class=\"section hidden\">\n            <div class=\"bg-white p-4 rounded-lg drop-shadow-xl border\">\n              <div class=\"\">\n                <h1 class=\"text-2xl font-bold leading-7 mb-4\">\n                  Thông tin tài khoản\n                </h1>\n    \n                <div class=\"bg-white px-4\">\n                  <form id=\"form-account-info\">\n                    <p class=\"text-sm font-bold leading-7\">Thông tin cá nhân</p>\n                    <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4 mt-2\">\n                      <div class=\"floating-label\">\n                        <input class=\"w-full h-[54px] p-2 border border-gray-300 rounded\" type=\"email\" id=\"email\"\n                          name=\"email\" value=\"\" placeholder=\"\" readonly />\n                        <label for=\"email\" class=\"text-[#919EAB]\">Email</label>\n                      </div>\n                      <div class=\"floating-label\">\n                        <input class=\"w-full h-[54px] p-2 border border-gray-300 rounded\" type=\"text\" id=\"full_name\"\n                          name=\"full_name\" value=\"\" placeholder=\"\" />\n                        <label for=\"full_name\" class=\"text-[#919EAB]\">Họ và tên</label>\n                      </div>\n    \n                      <div class=\"floating-label\">\n                        <input class=\"w-full h-[54px] p-2 border border-gray-300 rounded\" type=\"text\" id=\"phone_number\"\n                          name=\"phone_number\" value=\"\" placeholder=\"\" />\n                        <label for=\"phone_number\" class=\"text-[#919EAB]\">Số điện thoại</label>\n                      </div>\n                      <!-- <div class=\"floating-label\">\n                        <input class=\"w-full h-[54px] p-2 border border-gray-300 rounded\" type=\"text\" id=\"location\"\n                          name=\"location\" value=\"\" placeholder=\"\" />\n                        <label for=\"location\" class=\"text-[#919EAB]\">Địa chỉ</label>\n                      </div> -->\n                    </div>\n                    <p class=\"text-sm font-bold leading-7 mt-4\">Địa chỉ</p>\n                    <div class=\"grid grid-cols-1 md:grid-cols-3 gap-4 mt-2\">\n                      <div class=\"floating-label col-span-full\">\n                        <textarea class=\"w-full p-2 border border-gray-300 rounded\" type=\"text\" id=\"address\" name=\"address\"\n                          rows=\"3\" value=\"\" placeholder=\"\"></textarea>\n    \n                        <label for=\"address\" class=\"label-textarea text-[#919EAB]\">Địa chỉ chi tiết</label>\n                      </div>\n                    </div>\n                  </form>\n                </div>\n                <div class=\"flex justify-end px-4\">\n                  <div id=\"update-button\"\n                    class=\"bg-green-500 py-2 px-4 uhj.l];-1.5emrr'w=gw text-white text-sm rounded-md cursor-pointer hover:bg-green-600\">\n                    Cập nhật\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div id=\"my-orders\" class=\"section hidden\">\n            <div class=\"bg-white p-4 rounded-lg drop-shadow-xl border\">\n              <h1 class=\"text-2xl font-bold mb-4\">Đơn hàng của tôi</h1>\n              <!-- Filter and search -->\n              <div class=\"flex mb-4 flex-wrap gap-2\" id=\"list-filter\">\n                <button class=\"px-4 py-2 bg-gray-200 rounded mr-2 filter active\" onclick=\"filterOrders('all')\" id=\"all\">\n                  Tất cả\n                </button>\n              </div>\n              <div class=\"mb-4 flex flex-col xl:flex-row gap-2\">\n                <div class=\"w-full xl:w-3/4 relative\">\n                  <input type=\"text\" id=\"search-orders\" placeholder=\"Tìm kiếm đơn hàng\"\n                    class=\"w-full p-3 pr-7 border border-gray-300 rounded\" />\n                  <button class=\"absolute right-3 top-1/2 -translate-y-1/2\">\n                    <i class=\"fa fa-search\"></i>\n                  </button>\n                </div>\n                <div class=\"w-full xl:w-1/4 h-[50px] flex items-center relative\">\n                  <i class=\"fa fa-calendar absolute left-3 top-1/2 -translate-y-1/2\"></i>&nbsp;\n                  <input type=\"text\" name=\"daterange\"\n                    class=\"border border-solid border-gray-300 rounded h-full w-full pl-7\" />\n                </div>\n              </div>\n              <div class=\"overflow-x-auto\">\n                <table class=\"min-w-full bg-white\">\n                  <thead class=\"bg-[#F4F6F8]\">\n                    <tr>\n                      <th class=\"px-4 py-2 text-left\">Mã đơn</th>\n                      <th class=\"px-4 py-2 text-left\">Ngày tạo</th>\n                      <th class=\"px-4 py-2 text-center\">Trạng thái</th>\n                      <th class=\"px-4 py-2 text-right\">Tổng tiền</th>\n                    </tr>\n                  </thead>\n                  <tbody id=\"arr_order\"></tbody>\n                </table>\n              </div>\n            </div>\n          </div>\n          <div id=\"change-password\" class=\"section hidden\">\n            <div class=\"bg-white rounded-lg\">\n              <div class=\"max-w-[600px] mx-auto\">\n                <div class=\"bg-white p-4 rounded-lg drop-shadow-xl border\">\n                  <h1 class=\"text-2xl font-bold mb-4 ml-6\">Đổi mật khẩu</h1>\n                  <form id=\"form-reset-password\">\n                    <div class=\"relative floating-label\">\n                      <input id=\"current-password-field\" type=\"password\"\n                        class=\"form-control w-full p-2 h-[54px] border border-gray-300 rounded\" name=\"password-current\"\n                        value=\"\" placeholder=\"\" />\n                      <label for=\"password-current\" class=\"text-[#919EAB]\">Mật khẩu hiện tại</label>\n                      <span toggle=\"#current-password-field\"\n                        class=\"fa fa-solid fa-eye field-icon toggle-password absolute top-[50%] right-2 -translate-y-1/2\"></span>\n                    </div>\n                    <span class=\"error-password text-red-600 text-sm font-medium hidden\"></span>\n                    <div class=\"mt-4 relative floating-label\">\n                      <input id=\"new-password-field\" type=\"password\"\n                        class=\"form-control w-full p-2 h-[54px] border border-gray-300 rounded\" name=\"password-new\" value=\"\"\n                        placeholder=\"\" />\n                      <label for=\"password-new\" class=\"text-[#919EAB]\">Mật khẩu mới</label>\n                      <span toggle=\"#new-password-field\"\n                        class=\"fa fa-solid fa-eye field-icon toggle-password absolute top-[50%] right-2 -translate-y-1/2\"></span>\n                    </div>\n                    <span class=\"error-password-new text-red-600 text-sm font-medium hidden\">Hãy nhập mật khẩu mới</span>\n                    <div class=\"mt-4 relative floating-label\">\n                      <input id=\"repeat-password-field\" type=\"password\"\n                        class=\"form-control w-full p-2 h-[54px] border border-gray-300 rounded\" name=\"password-repeat\"\n                        value=\"\" placeholder=\"\" />\n                      <label for=\"password-repeat\" class=\"text-[#919EAB]\">Nhập lại mật khẩu</label>\n                      <span toggle=\"#repeat-password-field\"\n                        class=\"fa fa-solid fa-eye field-icon toggle-password absolute top-[50%] right-2 -translate-y-1/2\"></span>\n                    </div>\n                    <span class=\"error-password-repeat text-red-600 text-sm font-medium hidden\">Mật khẩu không khớp</span>\n    \n                    <div class=\"flex justify-end mt-2\">\n                      <button id=\"update-password\"\n                        class=\"font-bold text-[15px] leading-[26px] px-8 text-white rounded-lg h-10 bg-[#5CAF90]\">\n                        Cập nhật\n                      </button>\n                    </div>\n                  </form>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div id=\"logout\" class=\"section hidden\">\n            <div class=\"bg-white p-4 rounded-lg drop-shadow-xl border\">\n              <h1 class=\"text-2xl font-bold mb-4\">Đăng xuất</h1>\n              <!-- Đăng xuất -->\n              <div class=\"flex flex-col items-center mt-10\">\n                <span class=\"uppercase text-lg font-bold text-red-600\">Bạn có chắc chắn muốn đăng xuất không</span>\n                <div class=\"flex gap-4 mt-4\">\n                  <button class=\"bg-[#5CAF90] text-white px-4 py-2 rounded-lg\" onclick=\"logout()\">\n                    Đăng xuất\n                  </button>\n                  <button class=\"bg-gray-200 text-gray-700 px-4 py-2 rounded-lg\" onclick=\"showSection('account-info')\">\n                    Hủy\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div id=\"orderDetailModal\"\n        class=\"hidden fixed inset-0 bg-gray-800 bg-opacity-50 flex items-center justify-center z-50\">\n        <div\n          class=\"bg-gray-200 rounded-lg shadow-lg xl:p-6 w-full relative max-w-[1240px] mx-10 max-h-[80vh] overflow-hidden overflow-y-auto\">\n          <section class=\"w-full discover py-5\">\n            <div class=\"container flex-col\">\n              <div class=\"flex item-center justify-between mb-6\">\n                <span class=\"text-[#212B36] text-lg leading-7 font-bold\" id=\"orderDetailTitle\">Đơn hàng DH-12345</span>\n                <button class=\"closeModal\">\n                  <svg width=\"28\" height=\"28\" viewBox=\"0 0 28 28\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <path fill-rule=\"evenodd\" clip-rule=\"evenodd\"\n                      d=\"M13.9954 15.056L18.2361 19.297C18.3774 19.4335 18.5668 19.5091 18.7634 19.5074C18.9599 19.5057 19.1479 19.4268 19.2869 19.2878C19.4259 19.1488 19.5047 18.9608 19.5065 18.7642C19.5082 18.5677 19.4326 18.3783 19.2961 18.2369L15.0554 13.9959L19.2961 9.75489C19.4326 9.61349 19.5082 9.42412 19.5065 9.22755C19.5047 9.03099 19.4259 8.84295 19.2869 8.70395C19.1479 8.56496 18.9599 8.48611 18.7634 8.4844C18.5668 8.4827 18.3774 8.55826 18.2361 8.69482L13.9954 12.9358L9.75466 8.69482C9.61264 8.56164 9.42438 8.48893 9.22971 8.49209C9.03505 8.49525 8.84925 8.57403 8.71162 8.71176C8.574 8.84949 8.49536 9.03536 8.49234 9.23004C8.48932 9.42473 8.56215 9.61295 8.69543 9.75489L12.9354 13.9959L8.69468 18.2369C8.62308 18.306 8.56597 18.3888 8.52668 18.4802C8.48739 18.5717 8.46671 18.6701 8.46585 18.7696C8.46498 18.8692 8.48395 18.9679 8.52164 19.06C8.55934 19.1522 8.615 19.2359 8.68538 19.3062C8.75577 19.3766 8.83947 19.4323 8.9316 19.47C9.02372 19.5077 9.12244 19.5267 9.22197 19.5258C9.32151 19.5249 9.41988 19.5043 9.51133 19.465C9.60279 19.4257 9.68551 19.3686 9.75466 19.297L13.9954 15.056Z\"\n                      fill=\"#637381\" />\n                  </svg>\n                </button>\n              </div>\n              <div class=\"flex flex-col xl:flex-row gap-4\">\n                <div class=\"flex flex-col w-full xl:w-3/5 shadow-md bg-white rounded-md py-2 px-4\">\n                  <span class=\"font-bold text-sm leading-7 text-[#212B36]\">Sản phẩm</span>\n                  <div class=\"max-h-[300px] overflow-y-auto\">\n                    <table class=\"min-w-full bg-white\">\n                      <thead class=\"bg-[#F4F6F8]\">\n                        <tr>\n                          <th class=\"px-4 py-2 text-left\">Sản phẩm</th>\n                          <th class=\"px-4 py-2 text-left\">Đơn giá</th>\n                          <th class=\"px-4 py-2 text-center\">Số lượng</th>\n                          <th class=\"px-4 py-2 text-right\">Thành tiền</th>\n                        </tr>\n                      </thead>\n                      <tbody id=\"order-detail-modal\"></tbody>\n                    </table>\n                  </div>\n                  <div class=\"bg-white rounded-md py-2 border-b border-dashed border-[#919EAB33]\">\n                    <span class=\"font-bold text-sm leading-7 text-[#212B36]\">Thông tin giao hàng</span>\n                    <div class=\"px-2\">\n                      <div class=\"flex justify-between\">\n                        <span class=\"font-normal text-sm text-[#637381] leading-[22px]\">Chi tiết thanh toán</span>\n                        <span class=\"font-normal text-sm text-[#212B36] leading-[22px]\" id=\"grand-total\">0 VND</span>\n                      </div>\n                      <div class=\"flex justify-between\">\n                        <span class=\"font-normal text-sm text-[#637381] leading-[22px]\">Giảm giá</span>\n                        <span class=\"font-normal text-sm text-[#212B36] leading-[22px]\">-</span>\n                      </div>\n                      <div class=\"flex justify-between\">\n                        <span class=\"font-normal text-sm text-[#637381] leading-[22px]\">Phí vận chuyển</span>\n                        <span class=\"font-normal text-sm text-[#212B36] leading-[22px]\">-</span>\n                      </div>\n                    </div>\n                  </div>\n                  <div class=\"flex justify-between px-2 mt-4\">\n                    <span class=\"font-normal text-sm text-[#212B36] leading-[22px]\">Thành tiền</span>\n                    <span class=\"font-bold text-xl text-[#212B36] leading-[22px]\" id=\"grand-total-final\">0 VND</span>\n                  </div>\n                </div>\n                <div class=\"flex flex-col w-full xl:w-2/5 gap-4\">\n                  <div class=\"shadow-md bg-white rounded-md py-2 px-4\">\n                    <span class=\"font-bold text-sm leading-7 text-[#212B36]\">Thông tin đơn hàng</span>\n                    <div class=\"px-2\">\n                      <div class=\"flex justify-between\">\n                        <span class=\"font-normal text-sm text-[#637381] leading-[22px]\">Mã đơn hàng</span>\n                        <span class=\"font-normal text-sm text-[#212B36] leading-[22px]\" id=\"order-id\">DH-12345</span>\n                      </div>\n                      <div class=\"flex justify-between\">\n                        <span class=\"font-normal text-sm text-[#637381] leading-[22px]\">Ngày tạo</span>\n                        <span class=\"font-normal text-sm text-[#212B36] leading-[22px]\" id=\"order-date\">20/05/2024\n                          16:31:00</span>\n                      </div>\n                      <div class=\"flex justify-between\">\n                        <span class=\"font-normal text-sm text-[#637381] leading-[22px]\">Trạng thái</span>\n                        <span class=\"font-normal text-sm text-[#212B36] leading-[22px]\" id=\"order-status\"></span>\n                      </div>\n                    </div>\n                  </div>\n                  <div class=\"shadow-md bg-white rounded-md py-2 px-4\">\n                    <span class=\"font-bold text-sm leading-7 text-[#212B36]\">Thông tin giao hàng</span>\n                    <div class=\"px-2\">\n                      <div class=\"flex justify-between\">\n                        <span class=\"font-normal text-sm text-[#637381] leading-[22px]\">Họ tên</span>\n                        <span class=\"font-normal text-sm text-[#212B36] leading-[22px]\" id=\"delivery-name\"></span>\n                      </div>\n                      <div class=\"flex justify-between\">\n                        <span class=\"font-normal text-sm text-[#637381] leading-[22px]\" id=\"delivery-phone\">SDT</span>\n                        <span class=\"font-normal text-sm text-[#212B36] leading-[22px]\"></span>\n                      </div>\n                      <div class=\"flex justify-between\">\n                        <span class=\"font-normal text-sm text-[#637381] leading-[22px]\">Email</span>\n                        <span class=\"font-normal text-sm text-[#212B36] leading-[22px]\"\n                          id=\"delivery-email\">chuquynhanh256@gmail.com</span>\n                      </div>\n                      <div class=\"flex justify-between\">\n                        <span class=\"font-normal text-sm text-[#637381] leading-[22px]\">Địa chỉ nhận hàng</span>\n                        <span class=\"font-normal text-sm text-[#212B36] leading-[22px]\" id=\"delivery-address\">32 Đỗ Đức Dục,\n                          Mễ Trì, Nam từ Liêm,Hà Nội</span>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </section>\n        </div>\n      </div>\n    </div>", "custom_css": "   .active {\n        background-color: rgba(34, 197, 94, 0.08);\n        font-weight: 700;\n        font-size: 16px;\n        line-height: 22px;\n        color: #5caf90;\n      }\n\n      .floating-label {\n        position: relative;\n      }\n      .floating-label input:focus + label,\n      .floating-label input:not(:placeholder-shown) + label {\n        transform: translateY(-3em);\n        font-size: 0.75rem;\n        color: #4a5568; /* Tailwind's gray-700 */\n      }\n\n      .floating-label textarea:focus + label,\n      .floating-label textarea:not(:placeholder-shown) + label {\n        transform: translateY(-1.5em);\n        font-size: 0.75rem;\n        color: #4a5568; /* Tailwind's gray-700 */\n      }\n\n      .floating-label label {\n        position: absolute;\n        top: 50%;\n        transform: translateY(-50%);\n        left: 8px;\n        pointer-events: none;\n        transition: all 0.2s ease-out;\n        background-color: white;\n        padding: 0 0.25em;\n      }\n\n      .floating-label .label-textarea {\n        top: 10%;\n        transform: translateY(-10%);\n      }\n\n      .checked {\n        color: orange;\n      }", "custom_js": "<script>\n    if (!checkLogin()) {\n      window.location.href = \"/dang-nhap\";\n    }\n\n    let timeStart;\n    let timeEnd;\n    const currentUrl = new URL(window.location.href);\n    let currentTag = currentUrl.searchParams.get(\"tag\") ?? 'account-info'\n\n    function updateURL() {\n      const currentUrl = new URL(window.location.href);\n      currentUrl.searchParams.set(\"tag\", currentTag);\n      history.replaceState({}, \"\", currentUrl);\n    }\n\n    function showSection(sectionId) {\n      const sections = document.querySelectorAll(\".section\");\n      sections.forEach((section) => {\n        section.classList.add(\"hidden\");\n      });\n      document.getElementById(sectionId).classList.remove(\"hidden\");\n\n      const buttons = document.querySelectorAll(\"nav button\");\n      buttons.forEach((button) => {\n        button.classList.remove(\"active\");\n      });\n      buttons.forEach((button) => {\n        if (button.getAttribute(\"data-section\") === sectionId) {\n          button.classList.add(\"active\");\n        }\n      });\n      currentTag = sectionId\n      updateURL()\n      // event.target.classList.add(\"active\");\n    }\n\n    //\n    function filterOrders(status) {\n      // Remove active class from all filter buttons\n      const buttons = document.querySelectorAll(\".filter\");\n      buttons.forEach((button) => {\n        button.classList.remove(\"active\");\n      });\n\n      if (status === \"\") {\n        document.getElementById(\"all\").classList.add(\"active\");\n      } else {\n        document.getElementById(status).classList.add(\"active\");\n      }\n    }\n\n    //\n    //show modal order detail\n\n    $(\".toggle-password\").click(function () {\n      $(this).toggleClass(\"fa-eye fa-eye-slash\");\n      var input = $($(this).attr(\"toggle\"));\n      if (input.attr(\"type\") == \"password\") {\n        input.attr(\"type\", \"text\");\n      } else {\n        input.attr(\"type\", \"password\");\n      }\n    });\n    $(function () {\n      $('input[name=\"daterange\"]').daterangepicker(\n        {\n          opens: \"left\",\n          startDate: moment(),\n          endDate: moment(),\n        },\n        function (start, end, label) {\n          timeStart = start.format(\"YYYY-MM-DD\");\n          timeEnd = end.format(\"YYYY-MM-DD\");\n          getListOrder();\n        }\n      );\n    });\n\n    // Hien thi star\n\n    var starContainers = document.querySelectorAll(\".star-container\");\n\n    starContainers.forEach(function (container) {\n      var rating = parseInt(container.getAttribute(\"data-rating\"));\n      var stars = container.querySelectorAll(\".fa-star\");\n\n      // Set the checked class to the stars according to the rating\n      for (var i = 0; i < rating; i++) {\n        stars[i].classList.add(\"checked\");\n      }\n    });\n\n    //get account info and update account info\n\n    const apiGetAccountInfo =\n      \"/api/method/go1_cms.api.website.account.get_accout_info\";\n    const apiUpdateAccountInfo =\n      \"/api/method/go1_cms.api.website.account.update_accout_info\";\n\n    const getAccountInfo = () => {\n      fetch(`${apiGetAccountInfo}`, {\n        method: \"POST\",\n        headers: {\n          \"X-Frappe-CSRF-Token\": \"{{csrf_token}}\",\n        },\n      })\n        .then((response) => {\n          if (response.status === 403) {\n            window.location.href = \"/dang-nhap\";\n          } else if (!response.ok) {\n            throw new Error(\"Network response was not ok\");\n          } else {\n            return response.json();\n          }\n        })\n        .then((result) => {\n          document.getElementById(\"full_name\").value =\n            result.message.account_info.full_name || \"\";\n          document.getElementById(\"email\").value =\n            result.message.account_info.email || \"\";\n          document.getElementById(\"phone_number\").value =\n            result.message.account_info.mobile_no || \"\";\n          document.getElementById(\"address\").value =\n            result.message.address_info.address_line1 || \"\";\n        })\n        .catch((error) => {\n          console.error(\"Error:\", error);\n        });\n    };\n\n    getAccountInfo();\n\n    const updateAccountInfo = async () => {\n      const formAccountInfo = document.getElementById(\"form-account-info\");\n      const formData = new FormData(formAccountInfo);\n\n      const data = {\n        account_info: {\n          full_name: formData.get(\"full_name\") || \"\",\n          email: formData.get(\"email\") || \"\",\n          mobile_no: formData.get(\"phone_number\") || \"\",\n        },\n        address_info: {\n          address_line1: formData.get(\"address\"),\n        },\n      };\n\n      try {\n        const response = await fetch(`${apiUpdateAccountInfo}`, {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            \"X-Frappe-CSRF-Token\": \"{{csrf_token}}\",\n          },\n          body: JSON.stringify(data),\n        });\n\n        if (!response.ok) {\n          const errorData = await response.json();\n          let errorMessage = JSON.parse(\n            JSON.parse(errorData._server_messages)[0]\n          ).message;\n          if (errorMessage) {\n            Swal.fire({\n              title: \"Error!\",\n              text: errorMessage,\n              icon: \"error\",\n            });\n          }\n        } else {\n          const result = await response.json();\n          if (result) {\n            Swal.fire({\n              position: \"top-end\", // Hoặc có thể là 'top-start', 'bottom-end', 'bottom-start' tùy thuộc vị trí bạn muốn\n              icon: \"success\", // Có thể thay đổi thành 'error', 'warning', 'info' tùy thuộc vào loại thông báo\n              title: \"Cập nhật thông tin thành công\",\n              showConfirmButton: false, // Ẩn nút \"OK\"\n              timer: 1500, // Tự động tắt sau 1.5 giây\n              toast: true, // Thiết lập để popup nhỏ và giống như một toast\n            });\n          }\n        }\n      } catch (error) {\n        console.error(\"Error:\", error);\n      }\n    };\n\n    document\n      .getElementById(\"update-button\")\n      .addEventListener(\"click\", (e) => {\n        e.preventDefault();\n        updateAccountInfo();\n      });\n\n    // get list order\n\n    const apiGetListOrder =\n      \"/api/method/go1_cms.api.website.order.get_list_order\";\n    const nameSection = \"{{ name_section }}\";\n    let status = \"\";\n    let listStatus = [];\n    const searchOrders = document.getElementById(\"search-orders\");\n    let currentPage = 1;\n    let limit = 10;\n    let totalPage = 1;\n\n    // Debounce function: kỹ thuật debounced\n    function debounce(func, wait) {\n      let timeout;\n      return function (...args) {\n        clearTimeout(timeout);\n        timeout = setTimeout(() => func.apply(this, args), wait);\n      };\n    }\n\n    searchOrders.addEventListener(\n      \"input\",\n      debounce(() => {\n        currentPage = 1;\n        getListOrder();\n      }, 1000)\n    );\n\n    const apiGetListFilterOrder =\n      \"/api/method/go1_cms.api.website.order.get_status_order\";\n\n    const getListFilterOrder = () => {\n      fetch(`${apiGetListFilterOrder}`, {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"X-Frappe-CSRF-Token\": \"{{csrf_token}}\",\n        },\n      })\n        .then((response) => {\n          if (response.status === 403) {\n            window.location.href = \"/dang-nhap\";\n          } else if (!response.ok) {\n            throw new Error(\"Network response was not ok\");\n          } else {\n            return response.json();\n          }\n        })\n        .then((result) => {\n          if (result.message) {\n            displayListOrderFilter(result.message);\n            filterOrders(status);\n            getListOrder();\n          }\n        })\n        .catch((error) => {\n          console.error(\"Error:\", error);\n        });\n    };\n\n    const displayListOrderFilter = (listStatus) => {\n      const listFilter = document.getElementById(\"list-filter\");\n      listFilter.innerHTML = \"\";\n      for (const statuss of listStatus) {\n        const button = document.createElement(\"button\");\n        button.className = \"px-4 py-2 bg-gray-200 rounded mr-2 filter\";\n        button.id = statuss.value === \"\" ? \"all\" : statuss.value;\n        button.textContent = statuss.label;\n        button.addEventListener(\"click\", () => {\n          if (statuss.value !== status) {\n            status = statuss.value;\n            getListOrder();\n            filterOrders(status);\n          } else {\n          }\n        });\n        listFilter.appendChild(button);\n      }\n    };\n\n    const getListOrder = () => {\n      fetch(\n        `${apiGetListOrder}?name_section=${nameSection}&status=${status}&text_search=${searchOrders.value\n        }&page_no=${currentPage}&time_start=${timeStart || \"\"}&time_end=${timeEnd || \"\"\n        }`,\n        {\n          method: \"GET\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            \"X-Frappe-CSRF-Token\": \"{{csrf_token}}\",\n          },\n        }\n      )\n        .then((response) => {\n          if (response.status === 403) {\n            window.location.href = \"/dang-nhap\";\n          } else if (!response.ok) {\n            throw new Error(\"Network response was not ok\");\n          } else {\n            return response.json();\n          }\n        })\n        .then((result) => {\n          displayListOrder(result.message);\n          currentPage = result.message.pagination.current_page;\n          totalPage = result.message.pagination.total_page;\n        })\n        .catch((error) => {\n          console.error(\"Error:\", error);\n        });\n    };\n\n    const displayListOrder = (listOrders) => {\n      document.getElementById(\"arr_order\").innerHTML = \"\";\n      for (const order of listOrders.data) {\n        const row = document.createElement(\"tr\");\n        row.className = \"cursor-pointer\";\n        row.innerHTML = `\n                    <td class=\"px-4 py-2 cursor-pointer truncate\" id=\"showDetailOrder\">\n                      ${order.name}\n                    </td>\n                    <td class=\"px-4 py-2 truncate\">${order.transaction_date}</td>\n                    <td class=\"px-4 py-2 text-center truncate\" style=\"color:${order.color_status\n          }\">\n                      ${order.status}\n                    </td>\n                    <td class=\"px-4 py-2 text-right text-nowrap\">${order.grand_total?.toLocaleString()} VND</td>\n                  `;\n        row.addEventListener(\"click\", () => {\n          getDetailOrder(order.name, order.status, order.color_status);\n        });\n        document.getElementById(\"arr_order\").appendChild(row);\n      }\n    };\n\n    // get detail order\n    const apiGetDetailOrder =\n      \"/api/method/go1_cms.api.website.order.get_detail_order\";\n\n    const getDetailOrder = (orderName, orderStatus, orderStatusColor) => {\n      fetch(`${apiGetDetailOrder}?order_name=${orderName}`, {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"X-Frappe-CSRF-Token\": \"{{csrf_token}}\",\n        },\n      })\n        .then((response) => {\n          if (response.status === 403) {\n            window.location.href = \"/dang-nhap\";\n          } else if (!response.ok) {\n            throw new Error(\"Network response was not ok\");\n          } else {\n            return response.json();\n          }\n        })\n        .then((result) => {\n          showDetailOrder(result.message, orderStatus, orderStatusColor);\n        })\n        .catch((error) => {\n          console.error(\"Error:\", error);\n        });\n    };\n\n    // show detail order\n    const showDetailOrder = (information, status = \"\", statusColor = \"\") => {\n      document.getElementById(\"orderDetailModal\").classList.remove(\"hidden\");\n      document.getElementById(\"orderDetailTitle\").textContent =\n        \"Đơn hàng \" + information.name;\n      document.getElementById(\"order-detail-modal\").innerHTML = \"\";\n      for (const product of information.items) {\n        const row = document.createElement(\"tr\");\n        row.className = \"h-[58px] border-b border-dashed border-[#919EAB33]\";\n        row.innerHTML = `\n                    <td class=\"px-4 py-2 cursor-pointer flex flex-wrap gap-2\" id=\"showDetailOrder\">\n                      <div>\n                        <img src=\"${product.image}\" alt=\"\" class=\"h-11 w-11\" />\n                      </div>\n                      <div class=\"flex flex-col items-center text-center justify-center\">\n                        <span class=\"text-sm font-normal leading-[22px] text-[#212B36]\">${product.item_name\n          }</span>\n                      </div>\n                    </td>\n                    <td class=\"px-4 py-2 text-sm font-normal leading-[22px] text-[#212B36]\">${product.rate?.toLocaleString()} VND/${product.uom}</td>\n                    <td class=\"px-4 py-2 text-center text-sm font-normal leading-[22px] text-[#212B36]\">${product.qty\n          }</td>\n                    <td class=\"px-4 py-2 text-right text-sm font-normal leading-[22px] text-[#212B36]\">${product.amount?.toLocaleString()} VND</td>\n                  `;\n        document.getElementById(\"order-detail-modal\").appendChild(row);\n      }\n      document.getElementById(\"grand-total\").textContent =\n        information.grand_total?.toLocaleString() + \" VND\";\n      document.getElementById(\"grand-total-final\").textContent =\n        information.grand_total?.toLocaleString() + \" VND\";\n      document.getElementById(\"order-id\").textContent = information.name;\n      document.getElementById(\"order-date\").textContent =\n        information.transaction_date;\n      document.getElementById(\"delivery-name\").textContent =\n        information.address_billing_info.full_name;\n      document.getElementById(\"delivery-phone\").textContent =\n        information.address_billing_info.phone;\n      document.getElementById(\"delivery-email\").textContent =\n        information.address_billing_info.email;\n      document.getElementById(\"order-status\").textContent = status || \"\";\n      document.getElementById(\"order-status\").style.color = statusColor;\n\n      document.getElementById(\n        \"delivery-address\"\n      ).textContent = `${information.address_billing_info.address}`;\n    };\n\n    document.querySelector(\".closeModal\").addEventListener(\"click\", (e) => {\n      e.preventDefault();\n      document.getElementById(\"orderDetailModal\").classList.add(\"hidden\");\n    });\n\n    window.addEventListener(\"click\", function (event) {\n      const uploadModal = document.getElementById(\"orderDetailModal\");\n      if (event.target === uploadModal) {\n        uploadModal.classList.add(\"hidden\");\n      }\n    });\n\n    getListFilterOrder();\n\n    //validate form\n    document\n      .getElementById(\"current-password-field\")\n      .addEventListener(\"input\", () => {\n        const currentPassword = document.getElementById(\n          \"current-password-field\"\n        ).value;\n        if (currentPassword === \"\") {\n          document\n            .querySelector(\".error-password\")\n            .classList.remove(\"hidden\");\n          document.querySelector(\".error-password\").textContent =\n            \"Hãy nhập mật khẩu hiện tại\";\n        } else {\n          document.querySelector(\".error-password\").classList.add(\"hidden\");\n        }\n      });\n\n    document\n      .getElementById(\"new-password-field\")\n      .addEventListener(\"input\", () => {\n        const newPassword =\n          document.getElementById(\"new-password-field\").value;\n        if (newPassword === \"\") {\n          document\n            .querySelector(\".error-password-new\")\n            .classList.remove(\"hidden\");\n          document.querySelector(\".error-password-new\").textContent =\n            \"Hãy nhập mật khẩu mới\";\n        } else {\n          document\n            .querySelector(\".error-password-new\")\n            .classList.add(\"hidden\");\n        }\n      });\n\n    document\n      .getElementById(\"repeat-password-field\")\n      .addEventListener(\"input\", () => {\n        const repeatPassword = document.getElementById(\n          \"repeat-password-field\"\n        ).value;\n        const newPassword =\n          document.getElementById(\"new-password-field\").value;\n        if (repeatPassword === \"\") {\n          document\n            .querySelector(\".error-password-repeat\")\n            .classList.remove(\"hidden\");\n          document.querySelector(\".error-password-repeat\").textContent =\n            \"Hãy nhập lại mật khẩu\";\n        } else if (repeatPassword !== newPassword) {\n          document\n            .querySelector(\".error-password-repeat\")\n            .classList.remove(\"hidden\");\n          document.querySelector(\".error-password-repeat\").textContent =\n            \"Mật khẩu không khớp\";\n        } else {\n          document\n            .querySelector(\".error-password-repeat\")\n            .classList.add(\"hidden\");\n        }\n      });\n\n    // reset password\n\n    const apiResetPassword =\n      \"/api/method/go1_cms.api.website.account.reset_password\";\n\n    const resetPassword = async () => {\n      const formResetPassword = document.getElementById(\n        \"form-reset-password\"\n      );\n      const formData = new FormData(formResetPassword);\n\n      if (formData.get(\"password-current\") === \"\") {\n        document.querySelector(\".error-password\").classList.remove(\"hidden\");\n        document.querySelector(\".error-password\").textContent =\n          \"Hãy nhập mật khẩu hiện tại\";\n        return;\n      }\n\n      if (formData.get(\"password-new\") === \"\") {\n        document\n          .querySelector(\".error-password-new\")\n          .classList.remove(\"hidden\");\n        document.querySelector(\".error-password-new\").textContent =\n          \"Hãy nhập mật khẩu mới\";\n        return;\n      }\n\n      if (formData.get(\"password-repeat\") === \"\") {\n        document\n          .querySelector(\".error-password-repeat\")\n          .classList.remove(\"hidden\");\n        document.querySelector(\".error-password-repeat\").textContent =\n          \"Hãy nhập lại mật khẩu\";\n        return;\n      }\n\n      if (formData.get(\"password-new\") !== formData.get(\"password-repeat\")) {\n        document.querySelector(\".error-password\").classList.remove(\"hidden\");\n        return;\n      }\n      document.querySelector(\".error-password\").classList.add(\"hidden\");\n\n      const data = {\n        old_pwd: formData.get(\"password-current\"),\n        new_pwd: formData.get(\"password-new\"),\n      };\n\n      try {\n        const response = await fetch(`${apiResetPassword}`, {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            \"X-Frappe-CSRF-Token\": \"{{csrf_token}}\",\n          },\n          body: JSON.stringify(data),\n        });\n\n        if (!response.ok) {\n          const errorData = await response.json();\n          let errorMessage = JSON.parse(\n            JSON.parse(errorData._server_messages)[0]\n          ).message;\n          if (errorMessage) {\n            Swal.fire({\n              title: \"Error!\",\n              text: errorMessage,\n              icon: \"error\",\n            });\n          }\n        } else {\n          const result = await response.json();\n          if (result) {\n            Swal.fire({\n              position: \"top-end\", // Hoặc có thể là 'top-start', 'bottom-end', 'bottom-start' tùy thuộc vị trí bạn muốn\n              icon: \"success\", // Có thể thay đổi thành 'error', 'warning', 'info' tùy thuộc vào loại thông báo\n              title: \"Đổi mật khẩu thành công\",\n              showConfirmButton: false, // Ẩn nút \"OK\"\n              timer: 1500, // Tự động tắt sau 1.5 giây\n              toast: true, // Thiết lập để popup nhỏ và giống như một toast\n            });\n          }\n          window.location.href = \"/dang-nhap\";\n        }\n      } catch (error) {\n        console.error(\"Error:\", error);\n        Swal.fire({\n          title: \"Error!\",\n          text: error,\n          icon: \"error\",\n        });\n      }\n    };\n\n    document\n      .getElementById(\"update-password\")\n      .addEventListener(\"click\", (e) => {\n        e.preventDefault();\n        resetPassword();\n      });\n\n    // log out\n    const apiLogout = \"/api/method/logout\";\n\n    const logout = async () => {\n      try {\n        const response = await fetch(`${apiLogout}`, {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            \"X-Frappe-CSRF-Token\": \"{{csrf_token}}\",\n          },\n        });\n\n        if (!response.ok) {\n          throw new Error(\"Network response was not ok\");\n        }\n\n        const result = await response.json();\n        window.location.href = \"/dang-nhap\";\n      } catch (error) {\n        console.error(\"Error:\", error);\n      }\n    };\n    showSection(currentTag)\n  </script>", "doctype": "Page Section", "content": [], "section_column_css": [], "column_index": 1}]