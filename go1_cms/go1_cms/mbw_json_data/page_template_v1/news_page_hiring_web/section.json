[{"name": "PS-24-0000007604", "owner": "Administrator", "creation": "2024-08-14 08:20:42.307351", "modified": "2024-08-14 08:20:42.307351", "modified_by": "Administrator", "docstatus": 0, "idx": 2, "section_title": "MBW - Banner điều hướng trang", "route": "mbw - banner -i-u h--ng trang", "class_name": "crbgjmjf", "is_template": 0, "section_group": "Trang tuyển dụng - Hiring Page", "is_full_width": 0, "section_type": "Static Section", "view_type": "", "device_type": "Web & Mobile", "is_editable": 0, "is_login_required": 0, "content_type": "", "fetch_product": 0, "section_name": "MBW - Banner điều hướng trang", "image_option": "Same Document", "allow_update_to_style": 0, "no_of_records": 0, "sort_by": "DESC", "dynamic_data": 1, "display_data_randomly": 0, "image": "/files/Screenshot from 2024-06-04 09-21-37be3306.png", "enable_view_more": 0, "custom_section_data": "[]", "bg_type": "Color", "bg_color": "#ffffff", "web_template": "<section class=\"w-full\">\n        <div\n        class=\"header-sidebar bg-cover\"\n        style=\"background-image: url('{{ image_banner }}')\"\n      >\n        <div class=\"container mx-auto  flex item-center justify-center\">\n            <div class=\"w-full  text-white py-20 xl:py-[200px]\"  >\n                <div class=\"mx-4\">\n                    <div class=\" font-bold my-10\">\n                        <h1 class=\"text-4xl xl:text-6xl font-bold my-3 text-white\">{{ name }}</h1>\n                    </div>\n                </div>\n           </div>\n       </div>\n</section>", "doctype": "Page Section", "content": [{"name": "677c1ab733", "owner": "Administrator", "creation": "2024-08-14 08:20:42.307351", "modified": "2024-08-14 08:20:42.307351", "modified_by": "Administrator", "docstatus": 0, "idx": 1, "field_label": "Tiêu đề trang", "field_key": "name", "field_type": "Text", "content_type": "Data", "allow_update_to_style": 0, "content": "Title", "parent": "PS-24-0000007604", "parentfield": "content", "parenttype": "Page Section", "doctype": "Section Content"}, {"name": "41cd3221a9", "owner": "Administrator", "creation": "2024-08-14 08:20:42.307351", "modified": "2024-08-14 08:20:42.307351", "modified_by": "Administrator", "docstatus": 0, "idx": 2, "field_label": "Ảnh banner", "field_key": "image_banner", "field_type": "Attach", "content_type": "Data", "allow_update_to_style": 0, "content": "/files/banner.jpeg", "parent": "PS-24-0000007604", "parentfield": "content", "parenttype": "Page Section", "doctype": "Section Content"}], "section_column_css": [], "column_index": 1}, {"name": "PS-24-0000007605", "owner": "Administrator", "creation": "2024-08-14 08:20:42.414600", "modified": "2024-08-17 10:26:32.485049", "modified_by": "Administrator", "docstatus": 0, "idx": 2, "section_title": "MBW tin tức tuyển dụng", "route": "mbw tin t-c tuy-n d-ng", "class_name": "pzupxuvb", "is_template": 0, "section_group": "Trang tuyển dụng - Hiring Page", "is_full_width": 0, "section_type": "Static Section", "view_type": "", "device_type": "Web & Mobile", "is_editable": 0, "is_login_required": 0, "content_type": "", "fetch_product": 0, "section_name": "MBW tin tức tuyển dụng", "image_option": "Same Document", "allow_update_to_style": 0, "no_of_records": 0, "sort_by": "DESC", "dynamic_data": 1, "display_data_randomly": 0, "image": "/files/Screenshot from 2024-06-03 16-23-4558967d.png", "enable_view_more": 0, "custom_section_data": "[]", "bg_type": "Color", "bg_color": "#ffffff", "web_template": "    <section class=\"w-full discover flex item-center justify-center py-5\">\n      <div class=\"container flex-col text-center mx-3 xl:mx-0\">\n\n        <div class=\"grid grid-cols-1 xl:grid-cols-4 xl:gap-4\">\n          <div class=\"xl:order-last mb-5\">\n            <div\n              class=\"flex flex-col border text-left border-gray-500 rounded-xl\"\n            >\n              <div class=\"p-5\">\n                <form>\n                  <div class=\"my-3\">\n                    <p class=\"font-bold mb-2\">Seacrh</p>\n                    <div class=\"mx-auto\">\n                      <label\n                        for=\"default-search\"\n                        class=\"mb-2 text-sm font-medium text-gray-900 sr-only dark:text-black\"\n                        >Search</label\n                      >\n                      <div class=\"relative\">\n                        <input\n                          type=\"search\"\n                          id=\"news-search\"\n                          class=\"block w-full p-4 ps-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-white\"\n                          placeholder=\"Search\"\n                          required\n                        />\n                        <div\n                          class=\"absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none\"\n                        >\n                          <svg\n                            class=\"w-4 h-4 text-gray-500 dark:text-gray-400\"\n                            aria-hidden=\"true\"\n                            xmlns=\"http://www.w3.org/2000/svg\"\n                            fill=\"none\"\n                            viewBox=\"0 0 20 20\"\n                          >\n                            <path\n                              stroke=\"currentColor\"\n                              stroke-linecap=\"round\"\n                              stroke-linejoin=\"round\"\n                              stroke-width=\"2\"\n                              d=\"m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z\"\n                            />\n                          </svg>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                  <div class=\"my-3\">\n                    <p class=\"font-bold mb-2\">Category</p>\n                    <select\n                      id=\"category-select\"\n                      class=\"bg-white text-black text-sm rounded-lg border border-blue-500 block w-full p-4\"\n                    >\n                    </select>\n                  </div>\n                </form>\n\n                <div class=\"my-3 hidden xl:block\">\n                  <p class=\"mb-2 text-[#212B36] font-semibold leading-5\">\n                    Recent news\n                  </p>\n                  <div class=\"w-full\" id=\"blog-recent-container\"></div>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div class=\"col-span-3 grid grid-cols-1 gap-0\">\n            <div\n              class=\"list-info text-left grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10 h-fit\"\n              id=\"news-container\"\n            ></div>\n            <div id=\"pagination-container\" class=\"flex justify-center h-fit hidden\">\n              <button id=\"prev-page\" class=\"px-2 py-[1px] text-xl\"><</button>\n              <button id=\"next-page\" class=\"px-2 py-[1px] text-xl\">></button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </section>", "custom_css": " .text-container {\n        display: -webkit-box;\n        -webkit-box-orient: vertical;\n        -webkit-line-clamp: 2;\n        overflow: hidden;\n      }\n\n      .text-line {\n        display: -webkit-box;\n        -webkit-box-orient: vertical;\n        -webkit-line-clamp: 1;\n        overflow: hidden;\n      }\n\n      .page-number.active {\n        border: 1px solid #c4161c;\n        color: #c4161c;\n        border-radius: 2px;\n        font-weight: 500;\n      }\n\n      .no-active {\n        color: gray;\n        pointer-events: none;\n      }", "custom_js": "let news = [];\nlet recent_news = [];\nconst apiBlogList =\n  \"/api/method/go1_cms.api.website.blog.get_blog_list\";\nconst apiRecentNews =\n  \"/api/method/go1_cms.api.website.blog.get_recent_blog\";\nconst apiOptionsList =\n  \"/api/method/go1_cms.api.website.blog.get_categories\";\nconst name_section = \"{{ name_section}}\";\nlet text_search = \"\";\nlet itemsPerPage = 9; // Số lượng công việc trên mỗi trang\nlet total_page = 1;\nconst newSearch = document.getElementById(\"news-search\");\nconst category_search = document.getElementById(\"category-select\");\n\n// Lấy URL hiện tại\nconst currentUrl = new URL(window.location.href);\n\n// Lấy số trang hiện tại từ URL hoặc mặc định là 1\nlet currentPage = parseInt(currentUrl.searchParams.get(\"page_number\")) || 1;\n\nconst searchParams = new URLSearchParams(window.location.search);\nconst text_search_current = searchParams.get(\"search\");\nconst category_search_current = searchParams.get(\"category\");\n\nif (text_search_current) {\n  newSearch.value = text_search_current;\n  text_search = text_search_current;\n}\n\nconst getOptionsList = () => {\n  fetch(apiOptionsList, {\n    method: \"GET\",\n  })\n    .then((response) => response.json())\n    .then((result) => {\n      console.log(result);\n      if (result.message) {\n        const options = result.message?.data;\n        populateSelect(options);\n        if (category_search_current) {\n          category_search.value = category_search_current;\n        }\n      }\n    })\n    .catch((error) => {\n      console.log(error);\n    })\n    .finally(() => {\n      console.log(\"Options fetched\");\n      getBlogList();\n    });\n};\n\nfunction populateSelect(options) {\n  // Xóa các tùy chọn cũ, nếu có\n  options.forEach((option) => {\n    const optionElement = document.createElement(\"option\");\n    optionElement.value = option.value; // Assuming your options have a 'value' property\n    optionElement.text = option.label; // Assuming your options have a 'label' property\n    category_search.appendChild(optionElement);\n  });\n}\n\nconst getRecentBlog = () => {\n  fetch(`${apiRecentNews}?name_section=${name_section}`, {\n    method: \"GET\",\n  })\n    .then((response) => response.json())\n    .then((result) => {\n      console.log(result);\n      if (result.message) {\n        recent_news = result.message?.data;\n      }\n    })\n    .catch((error) => {\n      console.log(error);\n    })\n    .finally(() => {\n      console.log(\"Call api recent news\");\n      displayBlogRecent();\n    });\n};\n\nconst getBlogList = () => {\n  fetch(\n    `${apiBlogList}?name_section=${name_section}&text_search=${text_search}&page_no=${currentPage}&blog_category=${category_search.value}`,\n    {\n      method: \"GET\",\n    }\n  )\n    .then((response) => response.json())\n    .then((result) => {\n      console.log(result);\n      if (result.message) {\n        news = result.message?.data;\n        itemsPerPage = result.message?.pagination.limit;\n        total_page = result.message?.pagination.total_page;\n      }\n    })\n    .catch((error) => {\n      console.log(error);\n    })\n    .finally(() => {\n      console.log(\"Call API list new\");\n      displayNews();\n      updateURL();\n    });\n};\n\nfunction displayNews() {\n  const newContainer = document.getElementById(\"news-container\");\n  newContainer.innerHTML = \"\"; // Xóa nội dung cũ\n  if (news.length === 0) {\n    const emptyElement = document.createElement(\"div\");\n    emptyElement.className =\n      \"flex flex-col justify-center items-center gap-[38px] py-[80px] col-span-full mt-[38px]\";\n    emptyElement.innerHTML = `\n      <img src=\"/files/empty-state.svg\" alt=\"\" class=\"w-[245.64px] h-[236.85px]\"></img>\n      <span class=\"text-[#212B36] font-bold text-xl\">Không có kết quả tìm kiếm </span>\n      `;\n    newContainer.appendChild(emptyElement);\n  } else {\n    for (const blog of news) {\n      const blogElement = document.createElement(\"a\");\n      blogElement.href = blog.route;\n      blogElement.className =\n        \"w-full h-full item bg-white border border-gray-200 rounded-lg shadow\";\n      blogElement.innerHTML = `\n                <img\n                    class=\"rounded-t-lg w-full h-[147px]\"\n                    src='${blog.meta_image}'\n                    alt=\"\"\n                />\n                \n                    <div class=\"p-5\">\n                        <p class=\"text-gray-500 font-normal text-sm leading-[21px]\">\n                          <i class=\"fa fa-clock-o\"></i> ${blog.published_on}\n                        </p>\n    \n                        <a href=\"#\">\n                          <h5\n                            class=\"mb-2 text-lg font-bold tracking-tight text-[#212B36]\"\n                          >\n                            ${blog.title}\n                          </h5>\n                        </a>\n                        <p\n                          class=\"mb-3 font-normal text-sm text-[#637381] dark:text-gray-400 text-container\"\n                        >\n                          ${blog.blog_intro}\n                        </p>\n                    </div>\n            `;\n      newContainer.appendChild(blogElement);\n    }\n    displayPagination();\n    window.scrollTo(0, 400);\n  }\n}\n\nfunction displayBlogRecent() {\n  const blogRecent = document.getElementById(\"blog-recent-container\");\n\n  for (const blog of recent_news) {\n    const blogElement = document.createElement(\"a\");\n    blogElement.href = blog.route;\n    blogElement.className = \"h-full flex flex-row item-center w-full my-6\";\n    blogElement.innerHTML = `\n          <img\n            class=\"h-[50px] w-[63px] rounded-lg\"\n            alt=\"\"\n            src='${blog.meta_image}'\n            />\n            <div class=\"mx-3\">\n                <p\n                    class=\"text-[#637381] font-normal text-xs leading-[18px]\"\n                >\n                    <i class=\"fa fa-clock-o\"></i> ${blog.published_on}\n                </p>\n                <span\n                    class=\"text-[#212B36] font-semibold text-base leading-5\"\n                >${blog.title}\n                </span>\n            </div>\n        `;\n    blogRecent.appendChild(blogElement);\n  }\n\n  // Hiển thị các nút phân trang\n  displayPagination();\n  window.scrollTo(0, 400);\n}\n\nfunction displayPagination() {\n  const paginationContainer = document.getElementById(\"pagination-container\");\n  total_page === 1\n    ? paginationContainer.classList.add(\"hidden\")\n    : paginationContainer.classList.remove(\"hidden\");\n\n  const prevPage = document.getElementById(\"prev-page\");\n  const nextPage = document.getElementById(\"next-page\");\n\n  currentPage === 1\n    ? prevPage?.classList.add(\"no-active\")\n    : prevPage.classList.remove(\"no-active\");\n  currentPage === total_page\n    ? nextPage?.classList.add(\"no-active\")\n    : nextPage.classList.remove(\"no-active\");\n\n  paginationContainer\n    ?.querySelectorAll(\".page-number\")\n    ?.forEach((button) => button.remove());\n\n  for (let i = 1; i <= total_page; i++) {\n    const pageButton = document.createElement(\"button\");\n    pageButton.innerText = i;\n    pageButton.className = `page-number text-sm text-[#222222] font-normal px-2 py-[1px] ${\n      i === currentPage ? \"active\" : \"\"\n    }`;\n    pageButton.addEventListener(\"click\", () => {\n      currentPage = i;\n      getBlogList();\n    });\n    paginationContainer?.insertBefore(\n      pageButton,\n      document.getElementById(\"next-page\")\n    );\n  }\n}\n\nfunction updateURL() {\n  const currentUrl = new URL(window.location.href);\n  currentUrl.searchParams.set(\"page_number\", currentPage);\n  currentUrl.searchParams.set(\"search\", newSearch.value);\n  currentUrl.searchParams.set(\"category\", category_search.value);\n  history.replaceState({}, \"\", currentUrl);\n}\n\n// Thêm sự kiện click cho nút Previous\ndocument.getElementById(\"prev-page\").addEventListener(\"click\", () => {\n  if (currentPage > 1) {\n    currentPage--;\n    getBlogList();\n  }\n});\n\n// Thêm sự kiện click cho nút Next\ndocument.getElementById(\"next-page\").addEventListener(\"click\", () => {\n  if (currentPage < total_page) {\n    currentPage++;\n    getBlogList();\n  }\n});\n\n// Gọi hàm hiển thị lần đầu tiên\ngetRecentBlog();\ngetOptionsList();\nsetTimeout(() => {\n  getBlogList();\n}, 0);\n\n// Debounce function: kỹ thuật debounced\nfunction debounce(func, wait) {\n  let timeout;\n  return function (...args) {\n    clearTimeout(timeout);\n    timeout = setTimeout(() => func.apply(this, args), wait);\n  };\n}\n\nnewSearch.addEventListener(\n  \"input\",\n  debounce(() => {\n    text_search = newSearch.value;\n    currentPage = 1;\n    getBlogList();\n  }, 1000)\n);\n\ncategory_search.addEventListener(\"change\", () => {\n  getBlogList();\n});\n", "doctype": "Page Section", "content": [], "section_column_css": [], "column_index": 1}]