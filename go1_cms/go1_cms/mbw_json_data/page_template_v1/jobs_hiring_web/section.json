[{"name": "PS-24-0000007616", "owner": "Administrator", "creation": "2024-08-14 08:25:12.349781", "modified": "2024-08-14 08:25:12.349781", "modified_by": "Administrator", "docstatus": 0, "idx": 1, "section_title": "MBW - Banner điều hướng trang", "route": "mbw - banner -i-u h--ng trang", "class_name": "mkuczydp", "is_template": 0, "section_group": "Trang tuyển dụng - Hiring Page", "is_full_width": 0, "section_type": "Static Section", "view_type": "", "device_type": "Web & Mobile", "is_editable": 0, "is_login_required": 0, "content_type": "", "fetch_product": 0, "section_name": "MBW - Banner điều hướng trang", "image_option": "Same Document", "allow_update_to_style": 0, "no_of_records": 0, "sort_by": "DESC", "dynamic_data": 1, "display_data_randomly": 0, "image": "/private/files/Screenshot from 2024-06-04 09-21-37.png", "enable_view_more": 0, "custom_section_data": "[]", "bg_type": "Color", "bg_color": "#ffffff", "web_template": "<section class=\"w-full\">\n        <div\n        class=\"header-sidebar bg-cover\"\n        style=\"background-image: url('{{ image_banner }}')\"\n      >\n        <div class=\"container mx-auto  flex item-center justify-center\">\n            <div class=\"w-full  text-white py-20 xl:py-[200px]\"  >\n                <div class=\"mx-4\">\n                    <div class=\" font-bold my-10\">\n                        <h1 class=\"text-4xl xl:text-6xl font-bold my-3 text-white\">{{ name }}</h1>\n                    </div>\n                </div>\n           </div>\n       </div>\n</section>", "doctype": "Page Section", "content": [{"name": "bb92773e34", "owner": "Administrator", "creation": "2024-08-14 08:25:12.349781", "modified": "2024-08-14 08:25:12.349781", "modified_by": "Administrator", "docstatus": 0, "idx": 1, "field_label": "Tiêu đề trang", "field_key": "name", "field_type": "Text", "content_type": "Data", "allow_update_to_style": 0, "content": "Jobs", "parent": "PS-24-0000007616", "parentfield": "content", "parenttype": "Page Section", "doctype": "Section Content"}, {"name": "66ac56f38e", "owner": "Administrator", "creation": "2024-08-14 08:25:12.349781", "modified": "2024-08-14 08:25:12.349781", "modified_by": "Administrator", "docstatus": 0, "idx": 2, "field_label": "Ảnh banner", "field_key": "image_banner", "field_type": "Attach", "content_type": "Data", "allow_update_to_style": 0, "content": "/files/banner.jpeg", "parent": "PS-24-0000007616", "parentfield": "content", "parenttype": "Page Section", "doctype": "Section Content"}], "section_column_css": [], "column_index": 1}, {"name": "PS-24-0000007617", "owner": "Administrator", "creation": "2024-08-14 08:25:12.428083", "modified": "2024-08-16 14:32:32.021997", "modified_by": "Administrator", "docstatus": 0, "idx": 2, "section_title": "MBW Tìm kiếm Jobs - Trang tuyển dụng", "route": "mbw t-m ki-m jobs - trang tuy-n d-ng", "class_name": "ramhwieo", "is_template": 0, "section_group": "Trang tuyển dụng - Hiring Page", "is_full_width": 1, "section_type": "Custom Section", "view_type": "", "device_type": "Web & Mobile", "is_editable": 0, "is_login_required": 0, "content_type": "", "fetch_product": 0, "section_name": "MBW Tìm kiếm Jobs - Trang tuyển dụng", "image_option": "Same Document", "allow_update_to_style": 0, "reference_document": "Job Opening", "no_of_records": 8, "sort_by": "DESC", "dynamic_data": 1, "display_data_randomly": 0, "enable_view_more": 0, "custom_section_data": "[]", "bg_type": "Color", "bg_color": "#ffffff", "web_template": "<section class=\"w-full discover flex item-center justify-center py-5\">\n      <div class=\"container flex-col text-center mx-3 xl:mx-0\">\n        <div class=\"flex item-center justify-center flex-col mb-10\">\n          <p class=\"text-3xl xl:text-5xl font-bold py-3 my-2\">{{ title }}</p>\n          <i class=\"text-base font-normal leading-6 italic py-3\">{{ des }}</i>\n          <input type=\"file\" id=\"fileInput\" style=\"display: none\" />\n        </div>\n\n        <div\n          class=\"grid grid-cols-1 xl:grid-cols-4 xl:gap-4 relative\"\n          id=\"list-jobs-filter\"\n        >\n          <div id=\"loading\" class=\"loading-overlay absolute\">\n            <div class=\"spinner\"></div>\n          </div>\n          <div class=\"filter display mb-5\" id=\"filter\">\n            <div\n              class=\"relative flex flex-col border text-left border-l-gray-500 border-none md:border md:border-solid md:border-[#DFE3E8] bg-white rounded-l-lg md:rounded-lg h-full w-[88%] overflow-y-auto\"\n            >\n              <form id=\"formFilter\" class=\"p-5\">\n                <div class=\"my-3 flex justify-between items-center\">\n                  <p class=\"font-bold\">Bộ lọc</p>\n                  <button\n                    id=\"resetFilter\"\n                    class=\"font-semibold text-base text-[#1877F2]\"\n                  >\n                    Hoàn tác\n                  </button>\n                </div>\n                <div class=\"my-3\">\n                  <p class=\"font-bold mb-2\">Vị trí tuyển dụng</p>\n                  <div class=\"block max-h-[190px] overflow-auto\" id=\"job_designation_container\">\n                    \n                  </div>\n                </div>\n                <div class=\"my-3\">\n                  <p class=\"font-bold mb-2\">Hình thức làm việc</p>\n                  <div class=\"block\">\n                    <div class=\"my-3\">\n                      <input\n                        id=\"full-time\"\n                        type=\"checkbox\"\n                        name=\"job-type\"\n                        value=\"Full-time\"\n                        class=\"mr-2\"\n                      />\n                      <label for=\"full-time\">Full time</label>\n                    </div>\n                    <div class=\"my-3\">\n                      <input\n                        id=\"part-time\"\n                        type=\"checkbox\"\n                        value=\"Part-time\"\n                        class=\"mr-2\"\n                        name=\"job-type\"\n                      />\n                      <label for=\"part-time\">Part time</label>\n                    </div>\n                  </div>\n                </div>\n                <div class=\"my-3\">\n                  <p class=\"font-bold mb-2\">Địa chỉ</p>\n                  <div class=\"my-3\">\n                    <input\n                      id=\"haNoi\"\n                      type=\"checkbox\"\n                      name=\"job-locations\"\n                      value=\"Hà Nội\"\n                      class=\"mr-2\"\n                    />\n                    <label for=\"haNoi\">Hà Nội</label>\n                  </div>\n                  <div class=\"my-3\">\n                    <input\n                      id=\"HCM\"\n                      type=\"checkbox\"\n                      name=\"job-locations\"\n                      value=\"Hồ Chí Minh\"\n                      class=\"mr-2\"\n                    />\n                    <label for=\"HCM\">Hồ Chí Minh</label>\n                  </div>\n                  <div class=\"my-3\">\n                    <input\n                      id=\"Da-nang\"\n                      type=\"checkbox\"\n                      name=\"job-locations\"\n                      value=\"Đà Nẵng\"\n                      class=\"mr-2\"\n                    />\n                    <label for=\"Da-nang\">Đà Nẵng</label>\n                  </div>\n                </div>\n                <div class=\"my-3\">\n                  <p class=\"font-bold mb-2\">Mức lương</p>\n                  <div class=\"my-3\">\n                    <div class=\"relative\">\n                      <input\n                        type=\"number\"\n                        id=\"range_from\"\n                        placeholder=\" \"\n                        class=\"block w-full pl-3 pr-14 py-4 bg-white border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent peer\"\n                      />\n                      <label\n                        for=\"range_from\"\n                        class=\"absolute left-2 top-1 px-1 text-gray-500 bg-white transition-all duration-200 transform -translate-y-1/2 scale-75 origin-left peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-3 peer-focus:scale-75 peer-focus:-translate-y-1/2\"\n                        >Từ</label\n                      >\n                      <div\n                        id=\"delete-range-from\"\n                        class=\"absolute right-8 top-1/2 -translate-y-1/2\"\n                      >\n                        <img src=\"/files/delete-input.svg\" alt=\"\" />\n                      </div>\n                      <div class=\"absolute right-2 top-1/2 -translate-y-1/2\">\n                        <img src=\"/files/vnd.svg\" alt=\"\" />\n                      </div>\n                    </div>\n                  </div>\n                  <div class=\"my-3\">\n                    <div class=\"relative\">\n                      <input\n                        type=\"number\"\n                        id=\"range_to\"\n                        placeholder=\" \"\n                        class=\"block w-full pl-3 pr-14 py-4 bg-white border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent peer\"\n                      />\n                      <label\n                        for=\"range_to\"\n                        class=\"absolute left-2 top-1 px-1 text-gray-500 bg-white transition-all duration-200 transform -translate-y-1/2 scale-75 origin-left peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-3 peer-focus:scale-75 peer-focus:-translate-y-1/2\"\n                        >Đến</label\n                      >\n                      <div\n                        id=\"delete-range-to\"\n                        class=\"absolute right-8 top-1/2 -translate-y-1/2\"\n                      >\n                        <img src=\"/files/delete-input.svg\" alt=\"\" />\n                      </div>\n                      <div class=\"absolute right-2 top-1/2 -translate-y-1/2\">\n                        <img src=\"/files/vnd.svg\" alt=\"\" />\n                      </div>\n                    </div>\n                  </div>\n                </div>\n                <!-- <div>\n                  <button\n                    type=\"submit\"\n                    class=\"px-5 w-full py-2 text-lg font-medium text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800\"\n                  >\n                    Lọc\n                  </button>\n                </div> -->\n              </form>\n            </div>\n            <!-- button close filter -->\n            <button\n              id=\"button-close-filter\"\n              class=\"xl:hidden absolute top-1/2 -translate-y-1/2 left-0 z-[999999999] text-white bg-[#212B36] w-[12%] h-12 rounded-l-lg\"\n            >\n              x\n            </button>\n          </div>\n          <div class=\"overlay\" id=\"overlay\"></div>\n          <div class=\"list-jobs col-span-3 grid grid-cols-1 gap-7 h-fit\">\n            <div class=\"h-full flex flex-row gap-[38px]\">\n              <div class=\"w-full relative\">\n                <input\n                  type=\"text\"\n                  placeholder=\"Tìm kiếm\"\n                  class=\"w-full rounded-md py-4 pl-12 border text-sm outline-[#007bff]\"\n                  name=\"job-name\"\n                  id=\"job-name\"\n                />\n                <div class=\"absolute top-1/2 left-4 -translate-y-1/2\">\n                  <img src=\"/files/search.svg\" alt=\"\" />\n                </div>\n              </div>\n              <div class=\"h-full\">\n                <div\n                  class=\"h-full w-[160px] text-lg font-medium text-black rounded-[10px] text-center cursor-pointer flex items-center border\"\n                >\n                  <div\n                    id=\"order-by-button\"\n                    class=\"image border-r px-2.5 h-full flex items-center\"\n                  >\n                    <img id=\"sort-asc\" src=\"/files/asc.svg\" alt=\"\" />\n                    <img\n                      id=\"sort-desc\"\n                      class=\"hidden\"\n                      src=\"/files/Sort-icon-up.svg\"\n                      alt=\"\"\n                    />\n                  </div>\n                  <div class=\"flex items-center px-2.5\">\n                    <span class=\"font-normal text-sm\"> Last update on </span>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div\n              class=\"grid grid-cols-1 md:grid-cols-2 gap-[38px]\"\n              id=\"job-container\"\n            ></div>\n            <div id=\"pagination-container\" class=\"flex justify-center\">\n              <button id=\"prev-page\" class=\"px-2 py-[1px] text-xl\"><</button>\n              <button id=\"next-page\" class=\"px-2 py-[1px] text-xl\">></button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </section>\n\n    <button class=\"filter-toggle\" id=\"filterToggle\">\n      <i class=\"fa fa-filter w-6 h-6\" aria-hidden=\"true\"></i>\n    </button>", "custom_css": "      .listPage {\n        padding: 10px;\n        text-align: center;\n        list-style: none;\n      }\n      .listPage li {\n        background-color: #ffffffbd;\n        display: inline-block;\n        margin: 0 10px;\n        cursor: pointer;\n        color: #222222;\n        width: 24px;\n        height: 24px;\n      }\n      .listPage .active {\n        border: 1px solid #c4161c;\n        color: #c4161c;\n      }\n\n      .blocks {\n        pointer-events: none;\n        color: #ababab !important;\n      }\n\n      .text-container {\n        display: -webkit-box;\n        -webkit-box-orient: vertical;\n        -webkit-line-clamp: 2;\n        overflow: hidden;\n      }\n\n.filter-toggle {\n        display: none;\n        position: fixed;\n        right: 0;\n        top: 50%;\n        transform: translateY(-50%);\n        background: #212B36;\n        color: white;\n        border: none;\n        padding: 10px;\n        border-radius: 5px;\n        cursor: pointer;\n        width: 64px;\n        height: 48px;\n      }\n\n      .overlay {\n        display: none;\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background: rgba(0, 0, 0, 0.5);\n        z-index: 999;\n      }\n\n      @media (max-width: 1200px) {\n        .filter {\n          position: fixed;\n          top: 0;\n          right: 0;\n          height: 100%;\n          width: 70%;\n          z-index: 1000;\n          transform: translateX(-100%);\n          transition: transform 0.3s ease;\n          overflow-y: auto;\n          display: flex;\n          justify-content: flex-end;\n          background-color: rgba(0, 0, 0, -0.5);\n        }\n\n        .display {\n          display: none;\n        }\n\n        .filter.active {\n          transform: translateX(0);\n        }\n\n        .filter-toggle {\n          display: block;\n        }\n\n        .overlay.active {\n          display: block;\n        }\n      }\n\n/* Overlay for the entire screen */\n      .loading-overlay {\n        top: 50%;\n        transform: translateY(-50%);\n        width: 100%;\n        height: 100%;\n        background: rgba(255, 255, 255, 0.8);\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        z-index: 9999; /* Ensure it is above all other elements */\n        display: none; /* Hidden by default */\n      }\n\n      /* Spinner */\n      .spinner {\n        border: 4px solid rgba(0, 0, 0, 0.1);\n        border-top: 4px solid #3498db;\n        border-radius: 50%;\n        width: 40px;\n        height: 40px;\n        animation: spin 1s linear infinite;\n      }\n\n      /* Spinner animation */\n      @keyframes spin {\n        0% {\n          transform: rotate(0deg);\n        }\n        100% {\n          transform: rotate(360deg);\n        }\n      }\n\n .page-number.active {\n        border: 1px solid #c4161c;\n        color: #c4161c;\n        border-radius: 2px;\n        font-weight: 500;\n      }\n\n      .no-active {\n        color: gray;\n        pointer-events: none;\n      }", "custom_js": "document.addEventListener(\"DOMContentLoaded\", function () {\n  const filterToggle = document.getElementById(\"filterToggle\");\n  const filter = document.getElementById(\"filter\");\n  const closeButton = document.getElementById(\"button-close-filter\");\n  const overlay = document.getElementById(\"overlay\");\n\n  filterToggle.addEventListener(\"click\", function () {\n    filter.classList.add(\"active\");\n    filter.classList.remove(\"display\");\n    overlay.classList.toggle(\"active\");\n  });\n  closeButton.addEventListener(\"click\", () => {\n    filter.classList.add(\"display\");\n    filter.classList.remove(\"active\");\n    overlay.classList.remove(\"active\");\n  });\n\n  overlay.addEventListener(\"click\", function () {\n    filter.classList.remove(\"active\");\n    overlay.classList.remove(\"active\");\n    filter.classList.add(\"display\");\n  });\n\n  let jobs = [];\n  let itemsPerPage = 8;\n  let currentPage = 1;\n  let totalPages = 1;\n\n  const searchParams = new URLSearchParams(window.location.search);\n\n  const filterForm = document.getElementById(\"formFilter\");\n  const loadingIndicator = document.getElementById(\"loading\");\n  const deleteRangeFrom = document.getElementById(\"delete-range-from\");\n  const deleteRangeTo = document.getElementById(\"delete-range-to\");\n  const rangeFrom = document.getElementById(\"range_from\");\n  const rangeTo = document.getElementById(\"range_to\");\n  const resetFilter = document.getElementById(\"resetFilter\");\n  const sortAsc = document.getElementById(\"sort-asc\");\n  const sortDesc = document.getElementById(\"sort-desc\");\n  const job_name = document.getElementById(\"job-name\") || \"\";\n  const jobDesignationContainer = document.getElementById(\n    \"job_designation_container\"\n  );\n\n  let sortType = searchParams.get(\"sort_by\") === \"asc\" ? 1 : 2;\n  let changeTimer; // Timer identifier\n  let changeInterval = 1000; // Thời gian chờ (ms)\n  const name_section = \"{{ name_section }}\";\n\n  const jobTypes = [];\n  const jobLocations = [];\n  const jobDesignation = [];\n\n  if (sortType === 1) {\n    sortAsc.classList.remove(\"hidden\");\n    sortDesc.classList.add(\"hidden\");\n  } else {\n    sortAsc.classList.add(\"hidden\");\n    sortDesc.classList.remove(\"hidden\");\n  }\n\n  document.getElementById(\"job-name\").addEventListener(\"input\", function () {\n    clearTimeout(changeTimer);\n    changeTimer = setTimeout(doneChanging, changeInterval);\n  });\n\n  // Hàm xử lý sau khi giá trị input thay đổi\n  function doneChanging() {\n    disableUI(true);\n    showLoading(true);\n    handleSearch();\n  }\n\n  resetFilter.addEventListener(\"click\", (e) => {\n    e.preventDefault();\n    const resetDataFilterFormCheckBox = (input, array) => {\n      document.querySelectorAll(input)?.forEach((checkbox) => {\n        checkbox.checked = false;\n      });\n      array.length = 0;\n      return array;\n    };\n\n    resetDataFilterFormCheckBox('input[name=\"job-type\"]', jobTypes);\n    resetDataFilterFormCheckBox('input[name=\"job-locations\"]', jobLocations);\n    resetDataFilterFormCheckBox(\n      'input[name=\"job_designation\"]',\n      jobDesignation\n    );\n    rangeFrom.value = \"\";\n    rangeTo.value = \"\";\n    job_name.value = \"\";\n    sortType = 1;\n\n    rangeSalary = [null, null];\n\n    const data = {\n      text_search: job_name.value || \"\",\n      job_type: jobTypes || [],\n      job_location: jobLocations || [],\n      job_designation: jobDesignation || [],\n      range_salary: rangeSalary,\n      sort_by: sortType === 1 ? \"asc\" : \"desc\",\n    };\n\n    updateUrl(data);\n    setTimeout(() => {\n      handleSearch();\n    }, 0);\n  });\n\n  const updateUrl = (data) => {\n    const params = new URLSearchParams();\n    // Duyệt qua các thuộc tính của object `data` và thêm chúng vào params\n    Object.keys(data).forEach((key) => {\n      if (Array.isArray(data[key])) {\n        // Nếu là mảng, thì thêm từng giá trị của mảng vào params với cùng một key\n        data[key].forEach((value) => params.append(key, value));\n      } else {\n        // Nếu không phải mảng, thêm trực tiếp vào params\n        params.set(key, data[key]);\n      }\n    });\n\n    const newUrl = `${window.location.pathname}?${params.toString()}`;\n    history.replaceState(null, \"\", newUrl);\n  };\n\n  deleteRangeFrom.addEventListener(\"click\", () => {\n    rangeFrom.value = \"\";\n    rangeSalary =\n      rangeFrom.value !== \"\" || rangeTo.value !== \"\"\n        ? [\n            parseInt(document.getElementById(\"range_from\").value) || null,\n            parseInt(document.getElementById(\"range_to\").value) || null,\n          ]\n        : [null, null];\n    const data = {\n      text_search: job_name.value || \"\",\n      job_type: jobTypes || [],\n      job_location: jobLocations || [],\n      job_designation: jobDesignation || [],\n      range_salary: rangeSalary,\n      sort_by: sortType === 1 ? \"asc\" : \"desc\",\n    };\n    updateUrl(data);\n    handleSearch();\n  });\n\n  deleteRangeTo.addEventListener(\"click\", () => {\n    rangeTo.value = \"\";\n    rangeSalary =\n      rangeFrom.value !== \"\" || rangeTo.value !== \"\"\n        ? [\n            parseInt(document.getElementById(\"range_from\").value) || null,\n            parseInt(document.getElementById(\"range_to\").value) || null,\n          ]\n        : [null, null];\n    const data = {\n      text_search: job_name.value || \"\",\n      job_type: jobTypes || [],\n      job_location: jobLocations || [],\n      job_designation: jobDesignation || [],\n      range_salary: rangeSalary,\n      sort_by: sortType === 1 ? \"asc\" : \"desc\",\n    };\n    updateUrl(data);\n  });\n\n  filterForm.addEventListener(\"change\", (e) => {\n    e.preventDefault();\n    doneChanging();\n  });\n\n  document.getElementById(\"order-by-button\").addEventListener(\"click\", (e) => {\n    e.preventDefault();\n    disableUI(true);\n    showLoading(true);\n    if (sortType === 1) {\n      sortType = 2;\n      sortAsc.classList.add(\"hidden\");\n      sortDesc.classList.remove(\"hidden\");\n    } else {\n      sortType = 1;\n      sortAsc.classList.remove(\"hidden\");\n      sortDesc.classList.add(\"hidden\");\n    }\n    handleSearch();\n  });\n\n  // Luu data\n\n  function restoreCheckboxesFromURL(paramName, inputName) {\n    const searchParams = new URLSearchParams(window.location.search);\n    console.log(\"searchParams: \", searchParams.getAll(paramName));\n\n    searchParams.getAll(paramName).forEach((value) => {\n      const checkbox = document.querySelector(\n        `input[name=\"${inputName}\"][value=\"${value}\"]`\n      );\n      console.log(checkbox);\n      if (checkbox) checkbox.checked = true;\n    });\n  }\n  restoreCheckboxesFromURL(\"job_type\", \"job-type\");\n  restoreCheckboxesFromURL(\"job_location\", \"job-locations\");\n  restoreCheckboxesFromURL(\"job_designation\", \"job_designation\");\n\n  rangeFrom.value = searchParams.getAll(\"range_salary\")[0];\n  rangeTo.value = searchParams.getAll(\"range_salary\")[1];\n  job_name.value = searchParams.get(\"text_search\");\n\n  function handleSearch() {\n    console.log(\"chay handle search\");\n    const getDataFilterFormCheckBox = (input, array, isNumber) => {\n      array.length = 0;\n      document.querySelectorAll(input + \":checked\").forEach((checkbox) => {\n        if (isNumber) {\n          array.push(parseFloat(checkbox.value));\n        } else {\n          array.push(checkbox.value);\n        }\n        return array;\n      });\n    };\n\n    getDataFilterFormCheckBox('input[name=\"job-type\"]', jobTypes);\n    getDataFilterFormCheckBox('input[name=\"job-locations\"]', jobLocations);\n    getDataFilterFormCheckBox('input[name=\"job_designation\"]', jobDesignation);\n    rangeSalary =\n      rangeFrom.value !== \"\" || rangeTo.value !== \"\"\n        ? [\n            parseInt(document.getElementById(\"range_from\").value) || null,\n            parseInt(document.getElementById(\"range_to\").value) || null,\n          ]\n        : [null, null];\n    const data = {\n      text_search: job_name.value || \"\",\n      job_type: jobTypes || [],\n      job_location: jobLocations || [],\n      job_designation: jobDesignation || [],\n      range_salary: rangeSalary,\n      sort_by: sortType === 1 ? \"asc\" : \"desc\",\n    };\n\n    updateUrl(data);\n\n    // Hàm để chuyển đổi đối tượng thành chuỗi query parameters\n    const buildQueryParams = (data) => {\n      const params = [];\n      Object.keys(data).forEach((key) => {\n        const value = data[key];\n        if (value !== null && value !== undefined) {\n          // Chuyển đổi giá trị thành chuỗi JSON nếu là đối tượng hoặc mảng\n          const stringValue =\n            typeof value === \"object\" ? JSON.stringify(value) : value;\n          params.push(`${key}=${stringValue}`);\n        }\n      });\n      return params.join(\"&\");\n    };\n\n    // Tạo chuỗi query parameters\n    const queryParams = buildQueryParams(data);\n    // Gửi dữ liệu đến server\n    fetch(\n      `/api/method/go1_cms.api.website.jobs.get_all_job?name_section=${name_section}&${queryParams}`,\n      {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n      }\n    )\n      .then((response) => response.json())\n      .then((result) => {\n        console.log(\"Success:\", result);\n        if (result.message.data.length) {\n          jobs = result.message.data;\n          console.log(jobs);\n        } else {\n          jobs = [];\n        }\n        itemsPerPage = result.message.pagination.limit;\n        currentPage = result.message.pagination.current_page;\n        totalPages = result.message.pagination.total_page;\n        displayJobs(currentPage);\n      })\n      .catch((error) => {\n        console.error(\"Error:\", error);\n        disableUI(false);\n        showLoading(false);\n      })\n      .finally(() => {\n        // Kích hoạt lại các thành phần UI\n        disableUI(false);\n        showLoading(false);\n      });\n  }\n\n  function disableUI(disable) {\n    // Vô hiệu hóa hoặc kích hoạt các checkbox và nút bấm\n    document.getElementById(\"list-jobs-filter\").disabled = disable;\n  }\n\n  async function fetchData() {\n    try {\n      const response = await fetch(\n        \"/api/method/go1_cms.api.website.jobs.get_filter_job\",\n        {\n          method: \"GET\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n        }\n      );\n      if (!response.ok) {\n        throw new Error(\"Network response was not ok\");\n      }\n      const data = await response.json();\n      displayJobDesignation(data.message.job_designation);\n      console.log(data);\n    } catch (error) {\n      console.error(\n        \"There has been a problem with your fetch operation:\",\n        error\n      );\n    } finally {\n      handleSearch();\n    }\n  }\n\n  const displayJobDesignation = (jobDesignations) => {\n    for (const jobDesignation of jobDesignations) {\n      const job_designation_element = document.createElement(\"div\");\n      job_designation_element.className = \"my-3\";\n      job_designation_element.innerHTML = `\n        <input\n            id=\"${jobDesignation.label}\"\n            type=\"checkbox\"\n            name=\"job_designation\"\n            value=\"${jobDesignation.value}\"\n            class=\"mr-2\"\n        />\n        <label for=\"${jobDesignation.label}\">${jobDesignation.label}</label>\n      `;\n      jobDesignationContainer.appendChild(job_designation_element);\n    }\n\n    restoreCheckboxesFromURL(\"job_designation\", \"job_designation\");\n  };\n\n  function showLoading(show) {\n    // Hiển thị hoặc ẩn loading indicator\n    loadingIndicator.style.display = show ? \"flex\" : \"none\";\n  }\n\n  function displayJobs(page) {\n    const jobContainer = document.getElementById(\"job-container\");\n    jobContainer.innerHTML = \"\"; // Xóa nội dung cũ\n\n    const startIndex = (page - 1) * itemsPerPage;\n    const endIndex = startIndex + itemsPerPage;\n    const paginatedJobs = jobs.slice(startIndex, endIndex);\n\n    if (paginatedJobs?.length === 0) {\n      const emptyElement = document.createElement(\"div\");\n      emptyElement.className = \"flex flex-col justify-center items-center gap-[38px] py-[80px] col-span-full mt-[38px]\";\n      emptyElement.innerHTML = `\n      <img src=\"/files/empty-state.svg\" alt=\"\" class=\"w-[245.64px] h-[236.85px]\"></img>\n      <span class=\"text-[#212B36] font-bold text-xl\">Không có kết quả tìm kiếm </span>\n      `;\n      jobContainer.appendChild(emptyElement);\n    } else {\n      for (const job of paginatedJobs) {\n        const jobElement = document.createElement(\"div\");\n        jobElement.className =\n          \"item h-fit text-left w-full p-6 bg-white border border-gray-200 rounded-lg shadow flex flex-row cursor-pointer\";\n        jobElement.innerHTML = `\n              <div class=\"w-full\">\n                  <a href=\"#\">\n                      <h5\n                          class=\"text-lg xl:text-xl font-bold tracking-tight text-black\"\n                      >\n                          ${job.job_title}\n                      </h5>\n                  </a>\n                  <div class=\"flex gap-2 items-center\">\n                      <div\n                          class=\"text-base font-normal text-[#637381]\"\n                      >\n                          <span>${job.pretty_posted_on}</span>\n                      </div>\n                  </div>\n                  <div class=\"flex flex-col gap-2 mt-3\">\n                      <div\n                        class=\"text-gray-500 flex items-center gap-1 lg:pr-[130px]\"\n                      >\n                        <img src=\"/files/location.svg\" alt=\"\" />\n                        <span class=\"font-normal text-base text-[#212B36]\"\n                          >${job.location}</span\n                        >\n                      </div>\n                      <div\n                        class=\"text-gray-500 flex items-center gap-1 lg:pr-[130px]\"\n                      >\n                        <img src=\"/files/time.svg\" alt=\"\" />\n                        <span class=\"font-normal text-base text-[#212B36]\"\n                          >${job.employment_type}</span\n                        >\n                      </div>\n                      <div\n                        class=\"text-gray-500 flex items-center gap-1 lg:pr-[130px]\"\n                      >\n                        <img src=\"/files/range-salary.svg\" alt=\"\" />\n                        <span class=\"font-normal text-base text-[#212B36]\"\n                          >${job.lower_range?.toLocaleString()} - ${job.upper_range?.toLocaleString()} ${\n          job.currency\n        }</span\n                        >\n                      </div>\n                  </div>\n              </div>\n              <div class=\"flex items-start\" style=\"${\n                job.designation === null ? \"display: none\" : \"\"\n              }\">\n                  <p\n                      class=\"text-sm leading-[18px] py-1 px-2 font-normal text-center text-black border border-[#919EAB52] rounded-lg text-nowrap\"\n                  >\n                      ${job.designation} \n                  </p>\n              </div>\n            `;\n        jobElement.addEventListener(\"click\", () => {\n          // Chuyển hướng đến trang chi tiết công việc với ID của công việc\n          window.location.href = `/${job.route}`;\n        });\n        jobContainer.appendChild(jobElement);\n      }\n    }\n\n    // Hiển thị các nút phân trang\n    displayPagination();\n    window.scrollTo(0, 400);\n  }\n\n  function displayPagination() {\n    const paginationContainer = document.getElementById(\"pagination-container\");\n    const prevPage = document.getElementById(\"prev-page\");\n    const nextPage = document.getElementById(\"next-page\");\n\n    currentPage === 1\n      ? prevPage?.classList.add(\"no-active\")\n      : prevPage.classList.remove(\"no-active\");\n    currentPage === totalPages\n      ? nextPage?.classList.add(\"no-active\")\n      : nextPage.classList.remove(\"no-active\");\n\n    totalPages > 1\n      ? paginationContainer.classList.remove(\"hidden\")\n      : paginationContainer.classList.add(\"hidden\");\n\n    paginationContainer\n      ?.querySelectorAll(\".page-number\")\n      ?.forEach((button) => button.remove());\n\n    for (let i = 1; i <= totalPages; i++) {\n      const pageButton = document.createElement(\"button\");\n      pageButton.innerText = i;\n      pageButton.className = `page-number text-sm text-[#222222] font-normal px-2 py-[1px] ${\n        i === currentPage ? \"active\" : \"\"\n      }`;\n      pageButton.addEventListener(\"click\", () => {\n        currentPage = i;\n        displayJobs(currentPage);\n      });\n      paginationContainer?.insertBefore(\n        pageButton,\n        document.getElementById(\"next-page\")\n      );\n    }\n  }\n\n  // Thêm sự kiện click cho nút Previous\n  document.getElementById(\"prev-page\").addEventListener(\"click\", () => {\n    if (currentPage > 1) {\n      currentPage--;\n      displayJobs(currentPage);\n    }\n  });\n\n  // Thêm sự kiện click cho nút Next\n  document.getElementById(\"next-page\").addEventListener(\"click\", () => {\n    if (currentPage < totalPages) {\n      currentPage++;\n      displayJobs(currentPage);\n    }\n  });\n\n  // Gọi hàm hiển thị lần đầu tiên\n  fetchData();\n  displayJobs(currentPage);\n});\n", "form": "SYS-F-Filter Hiring", "doctype": "Page Section", "content": [{"name": "ca016039b6", "owner": "Administrator", "creation": "2024-08-14 08:25:12.428083", "modified": "2024-08-16 14:32:32.021997", "modified_by": "Administrator", "docstatus": 0, "idx": 1, "field_label": "Tiêu đề", "field_key": "title", "field_type": "Text", "content_type": "Data", "allow_update_to_style": 0, "content": "Discover jobs for you", "parent": "PS-24-0000007617", "parentfield": "content", "parenttype": "Page Section", "doctype": "Section Content"}, {"name": "7f56471dc3", "owner": "Administrator", "creation": "2024-08-14 08:25:12.428083", "modified": "2024-08-16 14:32:32.021997", "modified_by": "Administrator", "docstatus": 0, "idx": 2, "field_label": "Mô tả", "field_key": "des", "field_type": "Small Text", "content_type": "Data", "allow_update_to_style": 0, "content": "Browse 200+ Top Jobs In Your Local City.", "parent": "PS-24-0000007617", "parentfield": "content", "parenttype": "Page Section", "doctype": "Section Content"}], "section_column_css": [], "column_index": 1}]