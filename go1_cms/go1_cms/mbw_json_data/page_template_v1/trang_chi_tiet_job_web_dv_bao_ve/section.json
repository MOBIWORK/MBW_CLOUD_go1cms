[{"name": "PS-24-0000010679", "owner": "Administrator", "creation": "2024-09-11 14:11:55.512442", "modified": "2024-10-08 15:49:45.814448", "modified_by": "Administrator", "docstatus": 0, "idx": 1, "section_title": "banner điều hướng web dvbv", "route": "banner -i-u h--ng web dvbv", "class_name": "jmngjrtt", "is_template": 0, "section_group": "Web dịch vụ bảo vệ", "is_full_width": 0, "allow_clone": 1, "is_clone": 0, "section_type": "Static Section", "view_type": "", "device_type": "Web & Mobile", "is_editable": 0, "is_login_required": 0, "content_type": "", "fetch_product": 0, "section_name": "banner điều hướng web dvbv", "image_option": "Same Document", "allow_update_to_style": 0, "query_by_category": 0, "no_of_records": 0, "sort_by": "DESC", "dynamic_data": 1, "display_data_randomly": 0, "image": "/files/Screenshot from 2024-09-10 13-44-42.png", "enable_view_more": 0, "custom_section_data": "[]", "bg_type": "Color", "bg_color": "#ffffff", "web_template": "<div class=\"bg-[url('{{ img }}')] bg-cover bg-no-repeat bg-left min-h-[250px] flex flex-col text-white items-start mb-[60px]\">\n      <div class=\"pt-[92px] flex flex-col gap-[14px] container mr-auto\">\n         <div class=\"\"><span class=\"font-bold text-[40px] leading-[48px]\">{{ title }}</span></div>\n\n         <div class=\"flex flex-wrap flex-row gap-3 items-start\">\n              {% for brc in breadcrumb %} \n      {% if loop.first %}\n        <a\n          href=\"{{ brc.route }}\"\n          class=\"font-medium text-xl leading-6 text-white\"\n          target=\"_blank\"\n        >{{ brc.menu }}</a>\n      {% else %}\n        <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M9.50391 18C9.64453 18 9.77734 17.9766 9.90234 17.9297C10.0273 17.8828 10.1289 17.8125 10.207 17.7188L15.2227 12.7031C15.3164 12.625 15.3867 12.5234 15.4336 12.3984C15.4805 12.2734 15.5039 12.1406 15.5039 12C15.5039 11.8594 15.4805 11.7305 15.4336 11.6133C15.3867 11.4961 15.3164 11.3906 15.2227 11.2969L10.207 6.30469C10.1289 6.21094 10.0273 6.13672 9.90234 6.08203C9.77734 6.02734 9.64453 6 9.50391 6C9.22266 6 8.98438 6.09766 8.78906 6.29297C8.59375 6.48828 8.49609 6.71875 8.49609 6.98438C8.49609 7.14062 8.52344 7.27734 8.57812 7.39453C8.63281 7.51172 8.70703 7.61719 8.80078 7.71094L13.0898 12L8.80078 16.3125C8.70703 16.3906 8.63672 16.4922 8.58984 16.6172C8.54297 16.7422 8.51953 16.875 8.51953 17.0156C8.51953 17.2812 8.61719 17.5117 8.8125 17.707C9.00781 17.9023 9.23828 18 9.50391 18Z\" fill=\"white\"/>\n</svg>\n\n        <a\n          href=\"{{ brc.route }}\"\n          target=\"_blank\"\n          class=\"font-medium text-xl leading-6 text-white\"\n        >{{ brc.menu }}</a>\n      {% endif %}\n    {% endfor %}\n              \n         </div>\n      </div>\n    </div>", "doctype": "Page Section", "content": [{"name": "08544c084a", "owner": "Administrator", "creation": "2024-09-11 14:11:55.512442", "modified": "2024-10-08 15:49:45.814448", "modified_by": "Administrator", "docstatus": 0, "idx": 1, "field_label": "banner", "field_key": "img", "field_type": "Attach", "content_type": "Data", "allow_update_to_style": 0, "content": "/files/bannerdvbv.png", "parent": "PS-24-0000010679", "parentfield": "content", "parenttype": "Page Section", "doctype": "Section Content"}, {"name": "0fc9c54b74", "owner": "Administrator", "creation": "2024-09-11 14:11:55.512442", "modified": "2024-10-08 15:49:45.814448", "modified_by": "Administrator", "docstatus": 0, "idx": 2, "field_label": "tiêu đề", "field_key": "title", "field_type": "Long Text", "content_type": "Data", "allow_update_to_style": 0, "content": "Giới thiệu", "parent": "PS-24-0000010679", "parentfield": "content", "parenttype": "Page Section", "doctype": "Section Content"}, {"name": "adf04bcac4", "owner": "Administrator", "creation": "2024-09-11 14:11:55.512442", "modified": "2024-10-08 15:49:45.814448", "modified_by": "Administrator", "docstatus": 0, "idx": 3, "field_label": "Đường dẫn", "field_key": "breadcrumb", "field_type": "List", "content_type": "Data", "allow_update_to_style": 0, "content": "[{\"menu\":\"Trang chủ\",\"route\":\"/home\",\"idx\":1}]", "fields_json": "[{\"field_label\":\"Tiêu đề\",\"field_key\":\"menu\",\"field_type\":\"Text\",\"idx\":1},{\"field_label\":\"Đường dẫn\",\"field_key\":\"route\",\"field_type\":\"Text\",\"idx\":2}]", "parent": "PS-24-0000010679", "parentfield": "content", "parenttype": "Page Section", "doctype": "Section Content"}], "section_column_css": [], "column_index": 1}, {"name": "PS-24-0000013370", "owner": "Administrator", "creation": "2024-10-08 16:31:52.664072", "modified": "2024-10-08 16:32:02.443887", "modified_by": "Administrator", "docstatus": 0, "idx": 3, "section_title": "Chi tiết job web dịch vụ bảo vệ", "route": "chi ti-t job web d-ch v- b-o v-", "class_name": "shkcpdxv", "is_template": 1, "section_group": "Web dịch vụ bảo vệ", "is_full_width": 0, "allow_clone": 1, "is_clone": 0, "section_type": "Custom Section", "view_type": "", "device_type": "Web & Mobile", "is_editable": 0, "is_login_required": 0, "content_type": "", "fetch_product": 0, "section_name": "Chi tiết job web dịch vụ bảo vệ", "image_option": "Same Document", "allow_update_to_style": 0, "reference_document": "Job Opening", "query_by_category": 0, "no_of_records": 0, "sort_by": "DESC", "dynamic_data": 0, "display_data_randomly": 0, "enable_view_more": 0, "custom_section_data": "[]", "bg_type": "Color", "bg_color": "#ffffff", "web_template": "<div>\n      <section class=\"w-full discover flex item-center justify-center my-10\">\n        <div class=\"container flex-col text-center\">\n          <div class=\"grid grid-cols-1 2xl:grid-cols-4 xl:gap-4 p-10\">\n            <div class=\"col-span-3 mb-10\">\n              <div class=\"mb-10\">\n                <div class=\"flex item-center justify-between my-1\">\n                  <p\n                    class=\"text-sm leading-[18px] py-1 px-2 font-normal text-center text-black border border-gray-500 rounded-lg job_department\">\n                    Programing & IT\n                  </p>\n                </div>\n                <div class=\"flex flex-col\">\n                  <p class=\"text-3xl text-left font-bold pt-3 job_title\">\n                    Team Leader\n                  </p>\n                </div>\n                <div class=\"flex flex-col md:flex-row gap-2 mt-5\">\n                  <div class=\"text-gray-500 flex items-center gap-1 lg:pr-[130px]\">\n                    <img src=\"/files/location.svg\" alt=\"\" />\n                    <span class=\"job_location font-normal text-base text-[#212B36]\">Hanoi-Vietnam</span>\n                  </div>\n                  <div class=\"text-gray-500 flex items-center gap-1 lg:pr-[130px]\">\n                    <img src=\"/files/time.svg\" alt=\"\" />\n                    <span class=\"job_employment_type font-normal text-base text-[#212B36]\">Full-time</span>\n                  </div>\n                  <div class=\"text-gray-500 flex items-center gap-1 lg:pr-[130px]\">\n                    <img src=\"/files/range-salary.svg\" alt=\"\" />\n                    <span class=\"job_salary font-normal text-base text-[#212B36]\">10.000.000 - 15.000.000</span>\n                  </div>\n                </div>\n              </div>\n              <div class=\"w-full mx-auto bg-white text-left rounded-lg\">\n                <h2 class=\"text-2xl font-bold mb-4\">Job Description</h2>\n    \n                <div class=\"job_description\"></div>\n              </div>\n            </div>\n            <div>\n              <div class=\"flex flex-col border text-left border-gray-500 rounded-xl\">\n                <div class=\"p-5\">\n                  <p class=\"font-bold my-3\">Thông tin chung</p>\n                  <table class=\"my-5 border-separate border-spacing-y-2 w-full\">\n                    <tr class=\"my-8\">\n                      <td class=\"font-light\">Ngày tạo</td>\n                      <td class=\"posted-on\">11/05/2024</td>\n                    </tr>\n                    <tr class=\"my-8\">\n                      <td class=\"pr-20 font-light\">Địa chỉ</td>\n                      <td class=\"job_location\">HaNoi</td>\n                    </tr>\n                    <tr class=\"my-8\">\n                      <td class=\"pr-20 font-light\">Số lượng tuyển</td>\n                      <td class=\"job_vacancies\">--</td>\n                    </tr>\n                    <tr class=\"my-8\">\n                      <td class=\"pr-20 font-light\">Hình thức làm việc</td>\n                      <td class=\"job_employment_type\">Full time</td>\n                    </tr>\n                    <tr class=\"my-8\">\n                      <td class=\"pr-20 font-light\">Mức lương</td>\n                      <td class=\"job_salary\">1000-2000$</td>\n                    </tr>\n                    <tr class=\"my-8\">\n                      <td class=\"pr-20 font-light\">Hạn nộp hồ sơ</td>\n                      <td>11/06/2024</td>\n                    </tr>\n                  </table>\n                  <form>\n                    <button\n                      class=\"px-5 w-full py-5 text-xl font-medium text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800 flex items-center justify-center gap-2\"\n                      id=\"applyButton\">\n                      {{ title_btn_form }}\n                      <svg width=\"19\" height=\"18\" viewBox=\"0 0 19 18\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                        <path fill-rule=\"evenodd\" clip-rule=\"evenodd\"\n                          d=\"M0.902208 3.66315C0.642208 1.32915 3.04521 -0.38485 5.16821 0.62115L17.1122 6.27915C19.4002 7.36215 19.4002 10.6181 17.1122 11.7011L5.16821 17.3602C3.04521 18.3662 0.643208 16.6521 0.902208 14.3181L1.38221 9.99015H9.50021C9.76542 9.99015 10.0198 9.88479 10.2073 9.69726C10.3949 9.50972 10.5002 9.25537 10.5002 8.99015C10.5002 8.72493 10.3949 8.47058 10.2073 8.28304C10.0198 8.09551 9.76542 7.99015 9.50021 7.99015H1.38321L0.903208 3.66315H0.902208Z\"\n                          fill=\"white\" />\n                      </svg>\n                    </button>\n                  </form>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n    \n      <!-- Modal -->\n      <div id=\"uploadModal\"\n        class=\"hidden fixed inset-0 bg-gray-600 bg-opacity-50 flex flex-col items-center justify-center z-[999] p-5\">\n        <div class=\"relative w-full max-w-[1105px]\">\n          <div id=\"close-modal-upload\" class=\"absolute right-0 -top-8 z-[99999] cursor-pointer text-xl\">\n            <img src=\"/files/cancel.svg\" alt=\"\" />\n          </div>\n        </div>\n        <div\n          class=\"bg-white rounded-lg shadow-lg p-6 w-full lg:max-w-[1105px] mx-10 max-h-[80vh] overflow-hidden overflow-y-auto\">\n          <section class=\"w-full discover flex item-center justify-center\">\n            <div class=\"container flex-col text-center\">\n              <div class=\"flex item-center justify-center flex-col\">\n                <div class=\"text-[40px] leading-[48px] font-bold py-3 my-3\">\n                  {{title_apply}} <p class=\"job_title text-[40px] leading-[48px] font-bold ml-2.5\"></p>\n                </div>\n                <span class=\"italic font-normal text-base leading-6\">{{ des }}</span>\n    \n              </div>\n              <div class=\"my-6\">\n                <form action=\"\" id=\"upload-cv-form\">\n                  <div\n                    class=\"grid md:grid-cols-2 items-center gap-16 mx-auto bg-white rounded-md text-[#333] font-[sans-serif]\">\n                    <div class=\"flex items-center justify-center rounded-3xl border border-gray-200 cursor-pointer h-full\"\n                      id=\"uploadContainer\">\n                      <div class=\"flex flex-col justify-center items-center md:py-0 py-5\">\n                        {% for field in form_data.form_fields %}\n                        {% if field.field_type == 'file' %}\n                        <input type=\"file\" id=\"fileInput\" style=\"display: none\" />\n                        <div>\n                          <img alt=\"\" src=\"/files/upload.png\" width=\"48\" height=\"48\" />\n                        </div>\n                        <h1 class=\"font-bold text-xl\">TẢI CV</h1>\n                        <p class=\"max-w-sm text-sm\">\n                          Chọn hoặc kéo thả file CV tại đây, Dung lượng file không\n                          quá 10M\n                        </p>\n                        <div class=\"file-name\" id=\"fileName\"></div>\n                        <div id=\"file_error\" class=\"error\"></div>\n                        {% endif %}\n                        {% endfor %}\n                      </div>\n                    </div>\n                    <div class=\"\">\n                      {% for field in form_data.form_fields %} {% if\n                      field.field_type != 'textarea' and field.field_type != 'file' %}\n                      <div class=\"floating-label\">\n                        <input type=\"{{ field.field_type }}\" placeholder=\"\"\n                          class=\"w-full rounded-md py-4 px-4 border text-sm\" name=\"{{ field.field_name }}\"\n                          id=\"btn1-{{ field.field_name }}\" />\n                        <label for=\"btn1-{{ field.field_name }}\" class=\"text-[#919EAB]\">{{field.field_label}}</label>\n                      </div>\n                      <div id=\"{{ field.field_name }}_error\" class=\"error text-left\"></div>\n                      {% endif %} {% if field.field_type == 'textarea' %}\n                      <div class=\"floating-label\">\n                        <textarea placeholder=\"\" rows=\"8\" class=\"w-full rounded-md px-4 border text-sm pt-2.5\"\n                          name=\"{{ field.field_name }}\" style=\"resize: none\" id=\"btn1-{{ field.field_name }}\" {% if\n                          field.field_mandatory %} required {% endif %}></textarea>\n                        <label for=\"btn1-{{ field.field_name }}\"\n                          class=\"label-textarea text-[#000000B2] text-sm font-normal\">{{field.field_placeholder}}</label>\n                      </div>\n                      {% endif %} {% endfor %}\n                      <div id=\"captcha-container\" class=\"flex flex-col justify-center items-start mb-2\">\n                        <div class=\"flex gap-2 w-full max-w-[380px]\">\n                          <img id=\"captcha-image\" src=\"\" alt=\"Captcha Image\" class=\"w-[332px] h-[106px]\" />\n                          <button id=\"reload-captcha\" class=\"flex-1 mt-4\">\n                            <i class=\"fa fa-refresh\" aria-hidden=\"true\"></i>\n                          </button>\n                        </div>\n                        <div class=\"w-full flex flex-col floating-label\">\n                          <input type=\"text\" id=\"captcha-input\" placeholder=\"\"\n                            class=\"border p-2 rounded-md h-[60px] max-w-[380px] w-full text-sm\" />\n                          <label for=\"name\" class=\"text-[#919EAB]\">Nhập Captcha</label>\n                        </div>\n                        <div id=\"captcha_error\" class=\"error text-left\"></div>\n                      </div>\n                    </div>\n                  </div>\n    \n                  <div class=\"w-full flex flex-row justify-center mt-2\">\n                    <button\n                      class=\"text-white bg-[#007bff] hover:bg-blue-600 font-semibold rounded-md text-sm px-6 py-3.5 w-[200px] flex justify-center\"\n                      type=\"submit\" id=\"apply-button\">\n                      <div class=\"loader hidden\" id=\"loader\"></div>\n                      <span id=\"apply-button-text\">{{ title_btn }}</span>\n                    </button>\n                  </div>\n                </form>\n              </div>\n            </div>\n          </section>\n        </div>\n      </div>\n    </div>", "custom_css": "      .error {\n        color: red;\n        font-size: 14px;\n      }\n\n      .loader {\n        border: 4px solid #f3f3f3;\n        border-top: 4px solid #3498db;\n        border-radius: 50%;\n        width: 20px;\n        height: 20px;\n        animation: spin 2s linear infinite;\n        cursor: not-allowed;\n      }\n\n      @keyframes spin {\n        0% {\n          transform: rotate(0deg);\n        }\n        100% {\n          transform: rotate(360deg);\n        }\n      }\n\n      .floating-label {\n        position: relative;\n      }\n      .floating-label input:focus + label,\n      .floating-label input:not(:placeholder-shown) + label {\n        transform: translateY(-3em);\n        font-size: 0.75rem;\n        color: #4a5568; /* Tailwind's gray-700 */\n      }\n\n      .floating-label textarea:focus + label,\n      .floating-label textarea:not(:placeholder-shown) + label {\n        transform: translateY(-1.5em);\n        font-size: 0.75rem;\n        color: #4a5568; /* Tailwind's gray-700 */\n      }\n\n      .floating-label label {\n        position: absolute;\n        top: 50%;\n        transform: translateY(-50%);\n        left: 8px;\n        pointer-events: none;\n        transition: all 0.2s ease-out;\n        background-color: white;\n        padding: 0 0.25em;\n      }\n\n      .floating-label .label-textarea {\n        top: 10%;\n        transform: translateY(-10%);\n      }\n\n      .floating-label:not(:first-child) {\n        margin-top: 1rem; /* mt-4 tương đương với 1rem */\n      }", "custom_js": "<script>\n      const form_data = {{ form_data.form_fields_json }}\n\n      const uploadModal = document.getElementById(\"uploadModal\");\n      const closeModal = document.getElementById(\"close-modal-upload\");\n      const loading = document.getElementById(\"loader\");\n      const applyButtonText = document.getElementById(\"apply-button-text\");\n      document.getElementById(\"applyButton\").addEventListener(\"click\", (e) => {\n        e.preventDefault();\n        uploadModal.classList.remove(\"hidden\");\n        getCaptcha();\n      });\n      closeModal.addEventListener(\"click\", () => {\n        uploadModal.classList.add(\"hidden\");\n      });\n\n      const captchaApi = \"/api/method/go1_cms.api.website.captcha.get_captcha\";\n      const uploadCvAPI = \"/api/method/go1_cms.api.website.jobs.upload_cv\";\n      const reloadCaptcha = document.getElementById(\"reload-captcha\");\n\n      reloadCaptcha.addEventListener(\"click\", (e) => {\n        e.preventDefault();\n        getCaptcha();\n      });\n\n      window.addEventListener(\"click\", function (event) {\n        const uploadModal = document.getElementById(\"uploadModal\");\n        if (event.target === uploadModal) {\n          uploadModal.classList.add(\"hidden\");\n        }\n      });\n\n      //\n\n      const uploadContainer = document.getElementById(\"uploadContainer\");\n      const fileInput = document.getElementById(\"fileInput\");\n      const fileNameDisplay = document.getElementById(\"fileName\");\n      let fileUpload;\n\n      // Show file dialog when clicking the container\n      uploadContainer.addEventListener(\"click\", () => {\n        fileInput.click();\n      });\n\n      // Highlight the drop area when a file is dragged over it\n      uploadContainer.addEventListener(\"dragover\", (e) => {\n        e.preventDefault();\n        uploadContainer.classList.add(\"dragover\");\n      });\n\n      // Remove the highlight when the file is no longer dragged over the drop area\n      uploadContainer.addEventListener(\"dragleave\", () => {\n        uploadContainer.classList.remove(\"dragover\");\n      });\n\n      // Handle the dropped files\n      uploadContainer.addEventListener(\"drop\", (e) => {\n        e.preventDefault();\n        uploadContainer.classList.remove(\"dragover\");\n\n        const files = e.dataTransfer.files;\n        handleFiles(files);\n      });\n\n      function validateField(field) {\n        let isValid = true;\n\n        if (field.field_type !== \"file\" && field.field_name !== \"captcha\" && field.field_mandatory === 1) {\n          const value = document\n            .getElementById(`btn1-${field.field_name}`)\n            ?.value.trim();\n          if (!value && field.field_mandatory) {\n            isValid = false;\n            document.getElementById(\n              `${field.field_name}_error`\n            ).textContent = `Vui lòng điền ${field.field_label}.`;\n            document\n              .getElementById(`btn1-${field.field_name}`)\n              .classList.add(\"border-red-500\", \"outline-red-500\");\n          } else {\n            document.getElementById(`${field.field_name}_error`).textContent = \"\";\n            document\n              .getElementById(`btn1-${field.field_name}`)\n              .classList.remove(\"border-red-500\", \"outline-red-500\");\n          }\n        }\n\n        if (field.field_type === \"file\" && field.field_mandatory) {\n          if (!fileUpload) {\n            isValid = false;\n            fileNameDisplay.textContent = \"Vui lòng chọn File CV.\";\n            fileNameDisplay.style.color = \"red\";\n            uploadContainer.classList.add(\"border-red-500\");\n          } else {\n            document.getElementById(\"file_error\").textContent = \"\";\n            uploadContainer.classList.remove(\"border-red-500\");\n          }\n        }\n        if (field.field_name === \"captcha\") {\n          const captchaText = document.getElementById(\"captcha-input\").value.trim();\n          if (!captchaText) {\n            isValid = false;\n            document.getElementById(\"captcha_error\").textContent =\n              \"Vui lòng điền mã Captcha.\";\n            document\n              .getElementById(\"captcha-input\")\n              .classList.add(\"border-red-500\", \"outline-red-500\");\n          } else {\n            document.getElementById(\"captcha_error\").textContent = \"\";\n            document\n              .getElementById(\"captcha-input\")\n              .classList.remove(\"border-red-500\", \"outline-red-500\");\n          }\n        }\n\n        return isValid;\n      }\n\n      // Hàm validate form\n      function validateForm() {\n        let isValid = true;\n        for (const field of form_data) {\n          if (!validateField(field) && field.field_mandatory) {\n            isValid = false;\n          }\n        }\n        if (!validateField({ field_name: \"captcha\" })) isValid = false;\n\n        return isValid;\n      }\n\n      for (const field of form_data) {\n        if (\n          document.getElementById(`btn1-${field.field_name}`) &&\n          field.field_mandatory\n        ) {\n          document\n            .getElementById(`btn1-${field.field_name}`)\n            ?.addEventListener(\"input\", () => validateField(field));\n        }\n      }\n\n      document\n        .getElementById(\"captcha-input\")\n        ?.addEventListener(\"input\", () => validateField({ field_name: \"captcha\" }));\n\n      fileInput.addEventListener(\"change\", (event) => {\n        handleFiles(event.target.files);\n        validateField(form_data?.find((field) => field.field_name === \"file\"));\n      });\n\n      // Handle file selection via input\n      fileInput.addEventListener(\"change\", (e) => {\n        const files = e.target.files;\n        handleFiles(files);\n      });\n\n      function handleFiles(files) {\n        if (files.length > 0) {\n          const file = files[0];\n          if (file.size <= 10 * 1024 * 1024) {\n            if (file.type === \"application/pdf\") {\n              // Kiểm tra loại tệp\n              fileNameDisplay.style.color = \"black\";\n              fileNameDisplay.textContent = `File đã chọn: ${file.name}`;\n              fileUpload = file;\n            } else {\n              fileNameDisplay.textContent = \"Chỉ gửi file định dạng pdf\";\n              fileNameDisplay.style.color = \"red\";\n            }\n          } else {\n            fileNameDisplay.textContent = \"Dung lượng file vượt quá 10MB\";\n            fileNameDisplay.style.color = \"red\";\n          }\n        }\n      }\n\n      const getCaptcha = () => {\n        fetch(`${captchaApi}`, {\n          method: \"GET\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n        })\n          .then((response) => response.json())\n          .then((result) => {\n            document.getElementById(\"captcha-image\").src =\n              result.message.captcha_image;\n          })\n          .catch((error) => {\n          })\n          .finally(() => {\n            // Kích hoạt lại các thành phần UI\n          });\n      };\n\n      document.getElementById(\"upload-cv-form\").addEventListener(\"submit\", (e) => {\n        e.preventDefault();\n        if (!validateForm()) {\n          return; // Dừng nếu form không hợp lệ\n        }\n        const form = document.getElementById(\"upload-cv-form\");\n        const formData = new FormData(form);\n\n        // Thêm các trường dữ liệu bổ sung vào formData\n        formData.append(\"name_job\", \"{{ job_opening.name }}\");\n        formData.append(\n          \"captcha_text\",\n          document.getElementById(\"captcha-input\").value\n        );\n        formData.append(\"form_name\", \"80a7ad0eff\");\n        formData.append(\"job_opening\", \"{{ job_opening.name }}\");\n\n        // Nếu fileUpload là tệp được người dùng chọn, thêm nó vào formData\n        formData.append(\"file_cv\", fileUpload);\n\n        loading.classList.remove(\"hidden\");\n        applyButtonText.classList.add(\"hidden\");\n        document.getElementById(\"apply-button\").disabled = true;\n\n        fetch(`${uploadCvAPI}`, {\n          method: \"POST\",\n          body: formData,\n          headers: {\n            \"X-Frappe-CSRF-Token\": \"{{csrf_token}}\", \n          },\n        })\n          .then((response) => response.json())\n          .then((result) => {\n            loading.classList.add(\"hidden\");\n            applyButtonText.classList.remove(\"hidden\");\n            document.getElementById(\"apply-button\").disabled = false;\n            if (result.message?.status === \"0\" || result.message?.status === \"1\") {\n              document.getElementById(\"captcha_error\").classList.remove(\"hidden\");\n              document.getElementById(\"captcha_error\").textContent = result.message.msg;\n            } else {\n              document.getElementById(\"captcha_error\").classList.add(\"hidden\");\n              Swal.fire({\n                title: \"Good job!\",\n                text: \"Bạn đã ứng tuyển thành công\",\n                icon: \"success\",\n              });\n              uploadModal.classList.add(\"hidden\");\n              form.reset();\n              fileUpload = null;\n              fileNameDisplay.textContent = \"\";\n            }\n          })\n          .catch((error) => {\n            loading.classList.add(\"hidden\");\n            applyButtonText.classList.remove(\"hidden\");\n            document.getElementById(\"apply-button\").disabled = false;\n          });\n      });\n      const job_id = \"{{ job_opening.name }}\";\n      const apiGetDetailJob = `/api/method/go1_cms.api.website.jobs.get_job_detail?name=${job_id}`;\n\n      // Hàm để định dạng ngày tháng\n      function formatDate(dateString) {\n        const date = new Date(dateString);\n        const day = String(date.getDate()).padStart(2, \"0\");\n        const month = String(date.getMonth() + 1).padStart(2, \"0\"); // Tháng bắt đầu từ 0\n        const year = date.getFullYear();\n        return `${day}/${month}/${year}`;\n      }\n\n      function renderData(data) {\n        // Hàm để cập nhật nội dung cho tất cả các phần tử với cùng class name\n        function updateElements(className, content, isHTML = false) {\n          const elements = document.querySelectorAll(className);\n          elements.forEach((element) => {\n            if (isHTML) {\n              element.innerHTML = content;\n            } else {\n              element.textContent = content;\n            }\n          });\n        }\n\n        // Cập nhật nội dung của các phần tử HTML bằng dữ liệu từ API\n        updateElements(\".job_title\", data.job_title);\n        updateElements(\".job_location\", data.location);\n        updateElements(\".job_employment_type\", data.employment_type);\n        updateElements(\".job_department\", data.designation);\n\n        // Hiển thị mức lương nếu có\n        if (data.publish_salary_range == 1) {\n          updateElements(\n            \".job_salary\",\n            `${data.lower_range}${\" \"}${data.currency} - ${data.upper_range}${\" \"}${data.currency\n            }`\n          );\n        } else {\n          updateElements(\".job_salary\", \"Thỏa thuận\");\n        }\n\n        if (data.job_requisition) {\n          updateElements(\".job_vacancies\", data.vacancies);\n        }\n\n        // Hiển thị mô tả công việc\n        updateElements(\".job_description\", data.description, true);\n\n        // Định dạng và cập nhật ngày tháng\n        const formattedDate = formatDate(data.posted_on);\n        updateElements(\".posted-on\", formattedDate);\n      }\n      // get detail job info\n      const getDetailJob = () => {\n        fetch(apiGetDetailJob, {\n          method: \"GET\",\n        })\n          .then((response) => response.json())\n          .then((result) => {\n            if (result.message) {\n              renderData(result.message);\n            }\n          })\n          .catch((error) => {\n          });\n      };\n\n      getDetailJob();\n\n    </script>", "form": "80a7ad0eff", "doctype": "Page Section", "content": [{"name": "59f4b81e53", "owner": "Administrator", "creation": "2024-10-08 16:31:52.664072", "modified": "2024-10-08 16:32:02.443887", "modified_by": "Administrator", "docstatus": 0, "idx": 1, "field_label": "Tiêu đề biểu mẫu ứng tuyển", "field_key": "title_apply", "field_type": "Text", "content_type": "Data", "allow_update_to_style": 0, "content": "Ứng tuyển", "parent": "PS-24-0000013370", "parentfield": "content", "parenttype": "Page Section", "doctype": "Section Content"}, {"name": "acd99d4e05", "owner": "Administrator", "creation": "2024-10-08 16:31:52.664072", "modified": "2024-10-08 16:32:02.443887", "modified_by": "Administrator", "docstatus": 0, "idx": 2, "field_label": "Nhãn nút hiển thị biểu mẫu ứng tuyển", "field_key": "title_btn_form", "field_type": "Text", "content_type": "Data", "allow_update_to_style": 0, "content": "Ứng tuyển ngay", "parent": "PS-24-0000013370", "parentfield": "content", "parenttype": "Page Section", "doctype": "Section Content"}, {"name": "c14a71ff90", "owner": "Administrator", "creation": "2024-10-08 16:31:52.664072", "modified": "2024-10-08 16:32:02.443887", "modified_by": "Administrator", "docstatus": 0, "idx": 3, "field_label": "Nhãn nút ứng tuyển", "field_key": "title_btn", "field_type": "Text", "content_type": "Data", "allow_update_to_style": 0, "content": "Nộp CV", "parent": "PS-24-0000013370", "parentfield": "content", "parenttype": "Page Section", "doctype": "Section Content"}, {"name": "7b3619fe98", "owner": "Administrator", "creation": "2024-10-08 16:31:52.664072", "modified": "2024-10-08 16:32:02.443887", "modified_by": "Administrator", "docstatus": 0, "idx": 4, "field_label": "Mô tả ngắn biểu mẫu ứng tuyển", "field_key": "des", "field_type": "Small Text", "content_type": "Data", "allow_update_to_style": 0, "content": "Ứng tuyển ngay!", "parent": "PS-24-0000013370", "parentfield": "content", "parenttype": "Page Section", "doctype": "Section Content"}], "section_column_css": [], "column_index": 1}]