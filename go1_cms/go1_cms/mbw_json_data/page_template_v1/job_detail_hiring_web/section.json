[{"name": "PS-24-0000013865", "owner": "Administrator", "creation": "2024-10-10 10:50:30.549722", "modified": "2024-10-10 10:50:51.350388", "modified_by": "Administrator", "docstatus": 0, "idx": 1, "section_title": "MBW - Banner điều hướng trang", "route": "mbw - banner -i-u h--ng trang", "class_name": "ywcnprmq", "is_template": 1, "section_group": "Trang tuyển dụng - Hiring Page", "is_full_width": 0, "allow_clone": 1, "is_clone": 0, "section_type": "Static Section", "view_type": "", "device_type": "Web & Mobile", "is_editable": 0, "is_login_required": 0, "content_type": "", "fetch_product": 0, "section_name": "MBW - Banner điều hướng trang", "image_option": "Same Document", "allow_update_to_style": 0, "query_by_category": 0, "no_of_records": 0, "sort_by": "DESC", "dynamic_data": 1, "display_data_randomly": 0, "image": "/files/Screenshot from 2024-06-04 09-21-37be3306.png", "enable_view_more": 0, "custom_section_data": "[]", "bg_type": "Color", "bg_color": "#ffffff", "web_template": "<section class=\"w-full\">\n      <div class=\"header-sidebar bg-cover bg-center h-[300px]  lg:h-[500px]\" style=\"background-image: url('{{ image_banner }}')\">\n        <div class=\"container mx-auto flex h-full items-center\">\n            <h1 class=\"text-4xl xl:text-6xl font-bold my-3 text-white\">{{ name }}</h1>\n        </div>\n    </section>", "doctype": "Page Section", "content": [{"name": "bb00f1c3c0", "owner": "Administrator", "creation": "2024-10-10 10:50:30.549722", "modified": "2024-10-10 10:50:51.350388", "modified_by": "Administrator", "docstatus": 0, "idx": 1, "field_label": "Tiêu đề trang", "field_key": "name", "field_type": "Text", "content_type": "Data", "allow_update_to_style": 0, "content": "Jobs", "parent": "PS-24-0000013865", "parentfield": "content", "parenttype": "Page Section", "doctype": "Section Content"}, {"name": "2bb400ad2b", "owner": "Administrator", "creation": "2024-10-10 10:50:30.549722", "modified": "2024-10-10 10:50:51.350388", "modified_by": "Administrator", "docstatus": 0, "idx": 2, "field_label": "Ảnh banner", "field_key": "image_banner", "field_type": "Attach", "content_type": "Data", "allow_update_to_style": 0, "content": "/files/banner.jpeg", "parent": "PS-24-0000013865", "parentfield": "content", "parenttype": "Page Section", "doctype": "Section Content"}], "section_column_css": [], "column_index": 1}, {"name": "PS-24-0000013863", "owner": "Administrator", "creation": "2024-10-10 10:49:04.298887", "modified": "2024-10-16 15:04:46.840681", "modified_by": "Administrator", "docstatus": 0, "idx": 2, "section_title": "MBW Detail's Job - Trang tuyển dụng", "route": "mbw detail-s job - trang tuy-n d-ng", "class_name": "ibtcmbsq", "is_template": 1, "section_group": "Trang tuyển dụng - Hiring Page", "is_full_width": 0, "allow_clone": 1, "is_clone": 0, "section_type": "Custom Section", "view_type": "", "device_type": "Web & Mobile", "is_editable": 0, "is_login_required": 0, "content_type": "", "fetch_product": 0, "section_name": "MBW Detail's Job - Trang tuyển dụng", "image_option": "Same Document", "allow_update_to_style": 0, "reference_document": "Job Opening", "query_by_category": 0, "no_of_records": 0, "sort_by": "DESC", "dynamic_data": 0, "display_data_randomly": 0, "image": "/files/Screenshot from 2024-06-03 16-04-123a66bc.png", "enable_view_more": 0, "custom_section_data": "[]", "bg_type": "Color", "bg_color": "#ffffff", "web_template": "<div>\n    <section class=\"w-full discover flex item-center justify-center my-10\">\n      <div class=\"container flex-col text-center\">\n        <div class=\"grid grid-cols-1 2xl:grid-cols-4 xl:gap-4 py-10\">\n          <div class=\"col-span-3 mb-10\">\n            <div class=\"mb-10\">\n              <div class=\"flex item-center justify-between my-1\">\n                <p\n                  class=\"text-sm leading-[18px] py-1 px-2 font-normal text-center text-black border border-gray-500 rounded-lg job_department\">\n                  --\n                </p>\n              </div>\n              <div class=\"flex flex-col\">\n                <p class=\"text-3xl text-left font-bold pt-3 job_title\">\n                  --\n                </p>\n              </div>\n              <div class=\"flex flex-col md:flex-row gap-2 mt-5\">\n                <div class=\"text-gray-500 flex items-center gap-1 lg:pr-[130px]\">\n                  <img src=\"/files/location.svg\" alt=\"\" />\n                  <span class=\"job_location font-normal text-base text-[#212B36]\">--</span>\n                </div>\n                <div class=\"text-gray-500 flex items-center gap-1 lg:pr-[130px]\">\n                  <img src=\"/files/time.svg\" alt=\"\" />\n                  <span class=\"job_employment_type font-normal text-base text-[#212B36]\">--</span>\n                </div>\n                <div class=\"text-gray-500 flex items-center gap-1 lg:pr-[130px]\">\n                  <img src=\"/files/range-salary.svg\" alt=\"\" />\n                  <span class=\"job_salary font-normal text-base text-[#212B36]\">--</span>\n                </div>\n              </div>\n            </div>\n            <div class=\"w-full mx-auto bg-white text-left rounded-lg\">\n              <h2 class=\"text-2xl font-bold mb-4\">Job Description</h2>\n\n              <div class=\"job_description\"></div>\n            </div>\n          </div>\n          <div>\n            <div class=\"flex flex-col border text-left border-gray-500 rounded-xl\">\n              <div class=\"p-5\">\n                <p class=\"font-bold my-3\">Thông tin chung</p>\n                <table class=\"my-5 border-separate border-spacing-y-2 w-full\">\n                  <tr class=\"my-8\">\n                    <td class=\"font-light\">Ngày tạo</td>\n                    <td class=\"posted-on\">--</td>\n                  </tr>\n                  <tr class=\"my-8\">\n                    <td class=\"pr-20 font-light\">Địa chỉ</td>\n                    <td class=\"job_location\">--</td>\n                  </tr>\n                  <tr class=\"my-8\">\n                    <td class=\"pr-20 font-light\">Số lượng tuyển</td>\n                    <td class=\"job_vacancies\">--</td>\n                  </tr>\n                  <tr class=\"my-8\">\n                    <td class=\"pr-20 font-light\">Hình thức làm việc</td>\n                    <td class=\"job_employment_type\">--</td>\n                  </tr>\n                  <tr class=\"my-8\">\n                    <td class=\"pr-20 font-light\">Mức lương</td>\n                    <td class=\"job_salary\">--</td>\n                  </tr>\n                  <tr class=\"my-8\">\n                    <td class=\"pr-20 font-light\">Hạn nộp hồ sơ</td>\n                    <td>--</td>\n                  </tr>\n                </table>\n                <form>\n                  <button\n                    class=\"px-5 w-full py-5 text-xl font-medium text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800 flex items-center justify-center gap-2\"\n                    id=\"applyButton\">\n                    {{ title_btn_form }}\n                    <svg width=\"19\" height=\"18\" viewBox=\"0 0 19 18\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                      <path fill-rule=\"evenodd\" clip-rule=\"evenodd\"\n                        d=\"M0.902208 3.66315C0.642208 1.32915 3.04521 -0.38485 5.16821 0.62115L17.1122 6.27915C19.4002 7.36215 19.4002 10.6181 17.1122 11.7011L5.16821 17.3602C3.04521 18.3662 0.643208 16.6521 0.902208 14.3181L1.38221 9.99015H9.50021C9.76542 9.99015 10.0198 9.88479 10.2073 9.69726C10.3949 9.50972 10.5002 9.25537 10.5002 8.99015C10.5002 8.72493 10.3949 8.47058 10.2073 8.28304C10.0198 8.09551 9.76542 7.99015 9.50021 7.99015H1.38321L0.903208 3.66315H0.902208Z\"\n                        fill=\"white\" />\n                    </svg>\n                  </button>\n                </form>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </section>\n\n    <!-- Modal -->\n    <div id=\"uploadModal\"\n      class=\"hidden fixed inset-0 bg-gray-600 bg-opacity-50 flex flex-col items-center justify-center z-[999] p-5\">\n      <div class=\"relative w-full max-w-[1105px]\">\n        <div id=\"close-modal-upload\" class=\"absolute right-0 -top-8 z-[99999] cursor-pointer text-xl\">\n          <img src=\"/files/cancel.svg\" alt=\"\" />\n        </div>\n      </div>\n      <div\n        class=\"bg-white rounded-lg shadow-lg p-6 w-full lg:max-w-[1105px] mx-10 max-h-[80vh] overflow-hidden overflow-y-auto\">\n        <section class=\"w-full discover flex item-center justify-center\">\n          <div class=\"container flex-col text-center\">\n            <div class=\"flex item-center justify-center flex-col\">\n              <div class=\"text-[40px] leading-[48px] font-bold py-3 my-3\">\n                {{title_apply}} <p class=\"job_title text-[40px] leading-[48px] font-bold ml-2.5\"></p>\n              </div>\n              <span class=\"italic font-normal text-base leading-6\">{{ des }}</span>\n\n            </div>\n            <div class=\"my-6\">\n              <form action=\"\" id=\"upload-cv-form\">\n                <div\n                  class=\"grid md:grid-cols-2 items-center gap-16 mx-auto bg-white rounded-md text-[#333] font-[sans-serif]\">\n                  <div class=\"flex items-center justify-center rounded-3xl border border-gray-200 cursor-pointer h-full\"\n                    id=\"uploadContainer\">\n                    <div class=\"flex flex-col justify-center items-center md:py-0 py-5\">\n                      {% for field in form_data.form_fields %}\n                      {% if field.field_type == 'file' %}\n                      <input type=\"file\" id=\"fileInput\" style=\"display: none\" />\n                      <div>\n                        <img alt=\"\" src=\"/files/upload.png\" width=\"48\" height=\"48\" />\n                      </div>\n                      <h1 class=\"font-bold text-xl\">TẢI CV</h1>\n                      <p class=\"max-w-sm text-sm\">\n                        Chọn hoặc kéo thả file CV tại đây, Dung lượng file không\n                        quá 10M\n                      </p>\n                      <div class=\"file-name\" id=\"fileName\"></div>\n                      <div id=\"file_error\" class=\"error\"></div>\n                      {% endif %}\n                      {% endfor %}\n                    </div>\n                  </div>\n                  <div class=\"\">\n                    {% for field in form_data.form_fields %} {% if\n                    field.field_type != 'textarea' and field.field_type != 'file' %}\n                    <div class=\"floating-label\">\n                      <input type=\"{{ field.field_type }}\" placeholder=\"\"\n                        class=\"w-full rounded-md py-4 px-4 border text-sm\" name=\"{{ field.field_name }}\"\n                        id=\"btn1-{{ field.field_name }}\" />\n                      <label for=\"btn1-{{ field.field_name }}\" class=\"text-[#919EAB]\">{{field.field_label}}</label>\n                    </div>\n                    <div id=\"{{ field.field_name }}_error\" class=\"error text-left\"></div>\n                    {% endif %} {% if field.field_type == 'textarea' %}\n                    <div class=\"floating-label\">\n                      <textarea placeholder=\"\" rows=\"8\" class=\"w-full rounded-md px-4 border text-sm pt-2.5\"\n                        name=\"{{ field.field_name }}\" style=\"resize: none\" id=\"btn1-{{ field.field_name }}\" {% if\n                        field.field_mandatory %} required {% endif %}></textarea>\n                      <label for=\"btn1-{{ field.field_name }}\"\n                        class=\"label-textarea text-[#000000B2] text-sm font-normal\">{{field.field_placeholder}}</label>\n                    </div>\n                    {% endif %} {% endfor %}\n                    <div id=\"captcha-container\" class=\"flex flex-col justify-center items-start mb-2\">\n                      <div class=\"flex gap-2 w-full max-w-[380px]\">\n                        <img id=\"captcha-image\" src=\"\" alt=\"Captcha Image\" class=\"w-[332px] h-[106px]\" />\n                        <button id=\"reload-captcha\" class=\"flex-1 mt-4\">\n                          <i class=\"fa fa-refresh\" aria-hidden=\"true\"></i>\n                        </button>\n                      </div>\n                      <div class=\"w-full flex flex-col floating-label\">\n                        <input type=\"text\" id=\"captcha-input\" placeholder=\"\"\n                          class=\"border p-2 rounded-md h-[60px] max-w-[380px] w-full text-sm\" />\n                        <label for=\"name\" class=\"text-[#919EAB]\">Nhập Captcha</label>\n                      </div>\n                      <div id=\"captcha_error\" class=\"error text-left\"></div>\n                    </div>\n                  </div>\n                </div>\n\n                <div class=\"w-full flex flex-row justify-center mt-2\">\n                  <button\n                    class=\"text-white bg-[#007bff] hover:bg-blue-600 font-semibold rounded-md text-sm px-6 py-3.5 w-[200px] flex justify-center\"\n                    type=\"submit\" id=\"apply-button\">\n                    <div class=\"loader hidden\" id=\"loader\"></div>\n                    <span id=\"apply-button-text\">{{ title_btn }}</span>\n                  </button>\n                </div>\n              </form>\n            </div>\n          </div>\n        </section>\n      </div>\n    </div>\n  </div>", "custom_css": "      .error {\n        color: red;\n        font-size: 14px;\n      }\n\n      .loader {\n        border: 4px solid #f3f3f3;\n        border-top: 4px solid #3498db;\n        border-radius: 50%;\n        width: 20px;\n        height: 20px;\n        animation: spin 2s linear infinite;\n        cursor: not-allowed;\n      }\n\n      @keyframes spin {\n        0% {\n          transform: rotate(0deg);\n        }\n        100% {\n          transform: rotate(360deg);\n        }\n      }\n\n      .floating-label {\n        position: relative;\n      }\n      .floating-label input:focus + label,\n      .floating-label input:not(:placeholder-shown) + label {\n        transform: translateY(-3em);\n        font-size: 0.75rem;\n        color: #4a5568; /* Tailwind's gray-700 */\n      }\n\n      .floating-label textarea:focus + label,\n      .floating-label textarea:not(:placeholder-shown) + label {\n        transform: translateY(-2em);\n        font-size: 0.75rem;\n        color: #4a5568; /* Tailwind's gray-700 */\n      }\n\n      .floating-label label {\n        position: absolute;\n        top: 50%;\n        transform: translateY(-50%);\n        left: 8px;\n        pointer-events: none;\n        transition: all 0.2s ease-out;\n        background-color: white;\n        padding: 0 0.25em;\n      }\n\n      .floating-label .label-textarea {\n        top: 10%;\n        transform: translateY(-10%);\n      }\n\n.floating-label:not(:first-child) {\n  margin-top: 1rem; /* mt-4 tương đương với 1rem */\n}", "custom_js": "<script>\n    const form_data = {{ form_data.form_fields_json }}\n\n    const uploadModal = document.getElementById(\"uploadModal\");\n    const closeModal = document.getElementById(\"close-modal-upload\");\n    const loading = document.getElementById(\"loader\");\n    const applyButtonText = document.getElementById(\"apply-button-text\");\n    document.getElementById(\"applyButton\").addEventListener(\"click\", (e) => {\n      e.preventDefault();\n      uploadModal.classList.remove(\"hidden\");\n      getCaptcha();\n    });\n    closeModal.addEventListener(\"click\", () => {\n      uploadModal.classList.add(\"hidden\");\n    });\n\n    const captchaApi = \"/api/method/go1_cms.api.website.captcha.get_captcha\";\n    const uploadCvAPI = \"/api/method/go1_cms.api.website.jobs.upload_cv\";\n    const reloadCaptcha = document.getElementById(\"reload-captcha\");\n\n    reloadCaptcha.addEventListener(\"click\", (e) => {\n      e.preventDefault();\n      getCaptcha();\n    });\n\n    window.addEventListener(\"click\", function (event) {\n      const uploadModal = document.getElementById(\"uploadModal\");\n      if (event.target === uploadModal) {\n        uploadModal.classList.add(\"hidden\");\n      }\n    });\n\n    //\n\n    const uploadContainer = document.getElementById(\"uploadContainer\");\n    const fileInput = document.getElementById(\"fileInput\");\n    const fileNameDisplay = document.getElementById(\"fileName\");\n    let fileUpload;\n\n    // Show file dialog when clicking the container\n    uploadContainer.addEventListener(\"click\", () => {\n      fileInput.click();\n    });\n\n    // Highlight the drop area when a file is dragged over it\n    uploadContainer.addEventListener(\"dragover\", (e) => {\n      e.preventDefault();\n      uploadContainer.classList.add(\"dragover\");\n    });\n\n    // Remove the highlight when the file is no longer dragged over the drop area\n    uploadContainer.addEventListener(\"dragleave\", () => {\n      uploadContainer.classList.remove(\"dragover\");\n    });\n\n    // Handle the dropped files\n    uploadContainer.addEventListener(\"drop\", (e) => {\n      e.preventDefault();\n      uploadContainer.classList.remove(\"dragover\");\n\n      const files = e.dataTransfer.files;\n      handleFiles(files);\n    });\n\n    function validateField(field) {\n      let isValid = true;\n\n      if (field.field_type !== \"file\" && field.field_name !== \"captcha\" && field.field_mandatory === 1) {\n        const value = document\n          .getElementById(`btn1-${field.field_name}`)\n          ?.value.trim();\n        if (!value && field.field_mandatory) {\n          isValid = false;\n          document.getElementById(\n            `${field.field_name}_error`\n          ).textContent = `Vui lòng điền ${field.field_label}.`;\n          document\n            .getElementById(`btn1-${field.field_name}`)\n            .classList.add(\"border-red-500\", \"outline-red-500\");\n        } else {\n          document.getElementById(`${field.field_name}_error`).textContent = \"\";\n          document\n            .getElementById(`btn1-${field.field_name}`)\n            .classList.remove(\"border-red-500\", \"outline-red-500\");\n        }\n      }\n\n      if (field.field_type === \"file\" && field.field_mandatory) {\n        if (!fileUpload) {\n          isValid = false;\n          fileNameDisplay.textContent = \"Vui lòng chọn File CV.\";\n          fileNameDisplay.style.color = \"red\";\n          uploadContainer.classList.add(\"border-red-500\");\n        } else {\n          document.getElementById(\"file_error\").textContent = \"\";\n          uploadContainer.classList.remove(\"border-red-500\");\n        }\n      }\n      if (field.field_name === \"captcha\") {\n        const captchaText = document.getElementById(\"captcha-input\").value.trim();\n        if (!captchaText) {\n          isValid = false;\n          document.getElementById(\"captcha_error\").textContent =\n            \"Vui lòng điền mã Captcha.\";\n          document\n            .getElementById(\"captcha-input\")\n            .classList.add(\"border-red-500\", \"outline-red-500\");\n        } else {\n          document.getElementById(\"captcha_error\").textContent = \"\";\n          document\n            .getElementById(\"captcha-input\")\n            .classList.remove(\"border-red-500\", \"outline-red-500\");\n        }\n      }\n\n      return isValid;\n    }\n\n    // Hàm validate form\n    function validateForm() {\n      let isValid = true;\n      for (const field of form_data) {\n        if (!validateField(field) && field.field_mandatory) {\n          isValid = false;\n        }\n      }\n      if (!validateField({ field_name: \"captcha\" })) isValid = false;\n\n      return isValid;\n    }\n\n    for (const field of form_data) {\n      if (\n        document.getElementById(`btn1-${field.field_name}`) &&\n        field.field_mandatory\n      ) {\n        document\n          .getElementById(`btn1-${field.field_name}`)\n          ?.addEventListener(\"input\", () => validateField(field));\n      }\n    }\n\n    document\n      .getElementById(\"captcha-input\")\n      ?.addEventListener(\"input\", () => validateField({ field_name: \"captcha\" }));\n\n    fileInput.addEventListener(\"change\", (event) => {\n      handleFiles(event.target.files);\n      validateField(form_data?.find((field) => field.field_name === \"file\"));\n    });\n\n    // Handle file selection via input\n    fileInput.addEventListener(\"change\", (e) => {\n      const files = e.target.files;\n      handleFiles(files);\n    });\n\n    function handleFiles(files) {\n      if (files.length > 0) {\n        const file = files[0];\n        if (file.size <= 10 * 1024 * 1024) {\n          if (file.type === \"application/pdf\") {\n            // Kiểm tra loại tệp\n            fileNameDisplay.style.color = \"black\";\n            fileNameDisplay.textContent = `File đã chọn: ${file.name}`;\n            fileUpload = file;\n          } else {\n            fileNameDisplay.textContent = \"Chỉ gửi file định dạng pdf\";\n            fileNameDisplay.style.color = \"red\";\n          }\n        } else {\n          fileNameDisplay.textContent = \"Dung lượng file vượt quá 10MB\";\n          fileNameDisplay.style.color = \"red\";\n        }\n      }\n    }\n\n    const getCaptcha = () => {\n      fetch(`${captchaApi}`, {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n      })\n        .then((response) => response.json())\n        .then((result) => {\n          document.getElementById(\"captcha-image\").src =\n            result.message.captcha_image;\n        })\n        .catch((error) => {\n        })\n        .finally(() => {\n          // Kích hoạt lại các thành phần UI\n        });\n    };\n\n    document.getElementById(\"upload-cv-form\").addEventListener(\"submit\", (e) => {\n      e.preventDefault();\n      if (!validateForm()) {\n        return; // Dừng nếu form không hợp lệ\n      }\n      const form = document.getElementById(\"upload-cv-form\");\n      const formData = new FormData(form);\n\n      // Thêm các trường dữ liệu bổ sung vào formData\n      formData.append(\"name_job\", \"{{ job_opening.name }}\");\n      formData.append(\n        \"captcha_text\",\n        document.getElementById(\"captcha-input\").value\n      );\n      formData.append(\"form_name\", \"80a7ad0eff\");\n      formData.append(\"job_opening\", \"{{ job_opening.name }}\");\n\n      // Nếu fileUpload là tệp được người dùng chọn, thêm nó vào formData\n      formData.append(\"file_cv\", fileUpload);\n\n      loading.classList.remove(\"hidden\");\n      applyButtonText.classList.add(\"hidden\");\n      document.getElementById(\"apply-button\").disabled = true;\n\n      fetch(`${uploadCvAPI}`, {\n        method: \"POST\",\n        body: formData,\n        headers: {\n          \"X-Frappe-CSRF-Token\": \"{{csrf_token}}\",\n        },\n      })\n        .then((response) => response.json())\n        .then((result) => {\n          loading.classList.add(\"hidden\");\n          applyButtonText.classList.remove(\"hidden\");\n          document.getElementById(\"apply-button\").disabled = false;\n          if (result.message?.status === \"0\" || result.message?.status === \"1\") {\n            document.getElementById(\"captcha_error\").classList.remove(\"hidden\");\n            document.getElementById(\"captcha_error\").textContent = result.message.msg;\n          } else {\n            document.getElementById(\"captcha_error\").classList.add(\"hidden\");\n            Swal.fire({\n              title: \"Good job!\",\n              text: \"Bạn đã ứng tuyển thành công\",\n              icon: \"success\",\n            });\n            uploadModal.classList.add(\"hidden\");\n            form.reset();\n            fileUpload = null;\n            fileNameDisplay.textContent = \"\";\n          }\n        })\n        .catch((error) => {\n          loading.classList.add(\"hidden\");\n          applyButtonText.classList.remove(\"hidden\");\n          document.getElementById(\"apply-button\").disabled = false;\n        });\n    });\n    const job_id = \"{{ job_opening.name }}\";\n    const apiGetDetailJob = `/api/method/go1_cms.api.website.jobs.get_job_detail?name=${job_id}`;\n\n    // Hàm để định dạng ngày tháng\n    function formatDate(dateString) {\n      const date = new Date(dateString);\n      const day = String(date.getDate()).padStart(2, \"0\");\n      const month = String(date.getMonth() + 1).padStart(2, \"0\"); // Tháng bắt đầu từ 0\n      const year = date.getFullYear();\n      return `${day}/${month}/${year}`;\n    }\n\n    function renderData(data) {\n      // Hàm để cập nhật nội dung cho tất cả các phần tử với cùng class name\n      function updateElements(className, content, isHTML = false) {\n        const elements = document.querySelectorAll(className);\n        elements.forEach((element) => {\n          if (isHTML) {\n            element.innerHTML = content;\n          } else {\n            element.textContent = content;\n          }\n        });\n      }\n\n      // Cập nhật nội dung của các phần tử HTML bằng dữ liệu từ API\n      updateElements(\".job_title\", data.job_title);\n      updateElements(\".job_location\", data.location);\n      updateElements(\".job_employment_type\", data.employment_type);\n      updateElements(\".job_department\", data.designation);\n\n      // Hiển thị mức lương nếu có\n      let salary = 'Thỏa thuận'\n      if (data.publish_salary_range == 1) {\n        if (data.lower_range && data.upper_range) {\n          salary = `${data.lower_range?.toLocaleString()} - ${data.upper_range?.toLocaleString()} ${data.currency}`\n        } else if (data.lower_range) {\n          salary = `Từ ${data.lower_range?.toLocaleString()} ${data.currency}`\n        } else if (data.upper_range) {\n          salary = `Lên tới ${data.upper_range?.toLocaleString()} ${data.currency}`\n        }\n      }\n      updateElements(\".job_salary\", salary);\n\n      if (data.job_requisition) {\n        updateElements(\".job_vacancies\", data.vacancies);\n      }\n\n      // Hiển thị mô tả công việc\n      updateElements(\".job_description\", data.description, true);\n\n      // Định dạng và cập nhật ngày tháng\n      const formattedDate = formatDate(data.posted_on);\n      updateElements(\".posted-on\", formattedDate);\n    }\n    // get detail job info\n    const getDetailJob = () => {\n      fetch(apiGetDetailJob, {\n        method: \"GET\",\n      })\n        .then((response) => response.json())\n        .then((result) => {\n          if (result.message) {\n            renderData(result.message);\n          }\n        })\n        .catch((error) => {\n        });\n    };\n\n    getDetailJob();\n\n  </script>", "form": "80a7ad0eff", "doctype": "Page Section", "content": [{"name": "3e4bb13c0a", "owner": "Administrator", "creation": "2024-10-10 10:49:04.298887", "modified": "2024-10-16 15:04:46.840681", "modified_by": "Administrator", "docstatus": 0, "idx": 1, "field_label": "Tiêu đề biểu mẫu ứng tuyển", "field_key": "title_apply", "field_type": "Text", "content_type": "Data", "allow_update_to_style": 0, "content": "Ứng tuyển", "parent": "PS-24-0000013863", "parentfield": "content", "parenttype": "Page Section", "doctype": "Section Content"}, {"name": "0f8e4968a6", "owner": "Administrator", "creation": "2024-10-10 10:49:04.298887", "modified": "2024-10-16 15:04:46.840681", "modified_by": "Administrator", "docstatus": 0, "idx": 2, "field_label": "Nhãn nút hiển thị biểu mẫu ứng tuyển", "field_key": "title_btn_form", "field_type": "Text", "content_type": "Data", "allow_update_to_style": 0, "content": "Ứng tuyển ngay", "parent": "PS-24-0000013863", "parentfield": "content", "parenttype": "Page Section", "doctype": "Section Content"}, {"name": "5043c77606", "owner": "Administrator", "creation": "2024-10-10 10:49:04.298887", "modified": "2024-10-16 15:04:46.840681", "modified_by": "Administrator", "docstatus": 0, "idx": 3, "field_label": "Nhãn nút ứng tuyển", "field_key": "title_btn", "field_type": "Text", "content_type": "Data", "allow_update_to_style": 0, "content": "Nộp CV", "parent": "PS-24-0000013863", "parentfield": "content", "parenttype": "Page Section", "doctype": "Section Content"}, {"name": "620a00a62a", "owner": "Administrator", "creation": "2024-10-10 10:49:04.298887", "modified": "2024-10-16 15:04:46.840681", "modified_by": "Administrator", "docstatus": 0, "idx": 4, "field_label": "Mô tả ngắn biểu mẫu ứng tuyển", "field_key": "des", "field_type": "Small Text", "content_type": "Data", "allow_update_to_style": 0, "content": "Ứng tuyển ngay!", "parent": "PS-24-0000013863", "parentfield": "content", "parenttype": "Page Section", "doctype": "Section Content"}], "section_column_css": [], "column_index": 1}, {"name": "PS-24-0000013864", "owner": "Administrator", "creation": "2024-10-10 10:49:54.511475", "modified": "2024-10-16 14:52:31.301792", "modified_by": "Administrator", "docstatus": 0, "idx": 3, "section_title": "Hiring - Relate jobs", "route": "hiring - relate jobs", "class_name": "mlchbnzs", "is_template": 1, "section_group": "Trang tuyển dụng - Hiring Page", "is_full_width": 1, "allow_clone": 1, "is_clone": 0, "section_type": "Custom Section", "view_type": "", "device_type": "Web & Mobile", "is_editable": 0, "is_login_required": 0, "content_type": "", "fetch_product": 0, "section_name": "Hiring - Relate jobs", "image_option": "Same Document", "allow_update_to_style": 1, "css_field_list": "[{\"fieldname\":\"default-colors\",\"label\":\"Color Palette Typography Default Colors\",\"fieldtype\":\"Data\",\"child_properties\":[{\"fieldname\":\"color\",\"label\":\"Color\",\"fieldtype\":\"Select\",\"default\":\"\",\"options\":[\"\",\"Primary Color\",\"Secondary Color\",\"Accent Color\",\"Light Color\",\"Dark Color\",\"Body Text Color\",\"Heading Text Color\"],\"variable_name\":\"--go1-typography-$-c\"},{\"fieldname\":\"typo-colbr\",\"fieldtype\":\"Column Break\"},{\"fieldname\":\"background-color\",\"label\":\"Background Color\",\"fieldtype\":\"Select\",\"default\":\"\",\"options\":[\"\",\"Primary Color\",\"Secondary Color\",\"Accent Color\",\"Light Color\",\"Dark Color\",\"Body Text Color\",\"Heading Text Color\"],\"variable_name\":\"--go1-typography-$-bg\"}]},{\"fieldname\":\"btn-default-colors\",\"label\":\"Color Palette Button Default Colors\",\"fieldtype\":\"Data\",\"child_properties\":[{\"fieldname\":\"color\",\"label\":\"Color\",\"fieldtype\":\"Select\",\"default\":\"\",\"options\":[\"\",\"Primary Color\",\"Secondary Color\",\"Accent Color\",\"Light Color\",\"Dark Color\",\"Body Text Color\",\"Heading Text Color\"],\"variable_name\":\"--go1-typography-$-c\"},{\"fieldname\":\"typo-colbr\",\"fieldtype\":\"Column Break\"},{\"fieldname\":\"background-color\",\"label\":\"Background Color\",\"fieldtype\":\"Select\",\"default\":\"\",\"options\":[\"\",\"Primary Color\",\"Secondary Color\",\"Accent Color\",\"Light Color\",\"Dark Color\",\"Body Text Color\",\"Heading Text Color\"],\"variable_name\":\"--go1-button-$-bg\"},{\"fieldname\":\"typo-colbr\",\"fieldtype\":\"Column Break\"},{\"fieldname\":\"border-color\",\"label\":\"Border Color\",\"fieldtype\":\"Select\",\"default\":\"\",\"options\":[\"\",\"Primary Color\",\"Secondary Color\",\"Accent Color\",\"Light Color\",\"Dark Color\",\"Body Text Color\",\"Heading Text Color\"],\"variable_name\":\"--go1-$-border-c\"}]}]", "reference_document": "Job Opening", "query_by_category": 0, "no_of_records": 4, "sort_by": "DESC", "dynamic_data": 0, "display_data_randomly": 0, "image": "/files/relate_job.png", "enable_view_more": 0, "custom_section_data": "[]", "bg_type": "Color", "bg_color": "#ffffff", "web_template": "<section class=\"w-full discover flex item-center justify-center py-5 my-10\">\n  <div class=\"container flex-col text-center\">\n    <div class=\"flex item-center justify-center flex-col gap-5\">\n      <p class=\"text-5xl font-bold\">{{ title }}</p>\n      <p class=\"text-base font-normal italic\">{{ note }}</p>\n    </div>\n    <div\n      class=\"text-left grid grid-cols-1 md:grid-cols-2 gap-10 mt-[38px]\"\n      id=\"job_related\"\n    >\n    </div>\n  </div>\n</section>\n", "custom_css": "      .text-container {\n        display: -webkit-box;\n        -webkit-box-orient: vertical;\n        -webkit-line-clamp: 2;\n        overflow: hidden;\n      }", "custom_js": "<script>\n    let jobs = [];\n    const apiRelatedJob = '/api/method/go1_cms.api.website.jobs.get_job_related'\n    const job_id_detail = '{{ job_opening.name }}'\n\n    const getRelatedJob = () => {\n      fetch(`${apiRelatedJob}?name=${job_id_detail}`, {\n        method: \"GET\",\n      })\n        .then((response) => response.json())\n        .then((result) => {\n          if (result.message) {\n            jobs = result.message?.jobs\n          }\n        })\n        .catch((error) => {\n        }).finally(() => {\n          displayJobs()\n        });\n    };\n\n    const displayJobs = () => {\n      const jobContainer = document.getElementById(\"job_related\");\n\n      const paginatedJobs = jobs?.length > 4 ? jobs?.slice(0, 4) : jobs\n      for (const job of paginatedJobs) {\n        const jobElement = document.createElement(\"div\");\n        let salary = 'Thỏa thuận'\n        if (job.publish_salary_range == 1) {\n          if (job.lower_range && job.upper_range) {\n            salary = `${job.lower_range?.toLocaleString()} - ${job.upper_range?.toLocaleString()} ${job.currency}`\n          } else if (job.lower_range) {\n            salary = `Từ ${job.lower_range?.toLocaleString()} ${job.currency}`\n          } else if (job.upper_range) {\n            salary = `Lên tới ${job.upper_range?.toLocaleString()} ${job.currency}`\n          }\n        }\n\n        jobElement.className =\n          \"item h-fit text-left w-full p-6 bg-white border border-gray-200 rounded-lg shadow cursor-pointer\";\n        jobElement.innerHTML = `\n        <div class=\"w-full\">\n                <div class=\"flex flex-wrap justify-between gap-3\">\n                    <div>\n                      <a href=\"#\">\n                          <h5\n                              class=\"text-lg xl:text-xl font-bold tracking-tight text-black\"\n                          >\n                              ${job.job_title}\n                          </h5>\n                      </a>\n                      <div class=\"flex gap-2 items-center\">\n                          <div\n                              class=\"text-base font-normal text-[#637381]\"\n                          >\n                              <span>${job.pretty_posted_on}</span>\n                          </div>\n                      </div>\n                    </div>\n                    <div class=\"flex items-start\" style=\"${job.designation === null ? \"display: none\" : \"\"}\">\n                        <p\n                            class=\"text-sm leading-[18px] py-1 px-2 font-normal text-center text-black border border-[#919EAB52] rounded-lg text-nowrap\"\n                        >\n                            ${job.designation} \n                        </p>\n                    </div>\n                  </div>\n                  <div class=\"flex flex-col gap-2 mt-3\">\n                      <div\n                        class=\"text-gray-500 flex items-center gap-1\"\n                      >\n                        <img src=\"/files/location.svg\" alt=\"\" />\n                        <span class=\"font-normal text-base text-[#212B36]\"\n                          >${job.location}</span\n                        >\n                      </div>\n                      <div\n                        class=\"text-gray-500 flex items-center gap-1\"\n                      >\n                        <img src=\"/files/time.svg\" alt=\"\" />\n                        <span class=\"font-normal text-base text-[#212B36]\"\n                          >${job.employment_type}</span\n                        >\n                      </div>\n                      <div\n                        class=\"text-gray-500 flex items-center gap-1\"\n                      >\n                        <img src=\"/files/range-salary.svg\" alt=\"\" />\n                        <span class=\"font-normal text-base text-[#212B36]\"\n                          >${salary}</span\n                        >\n                      </div>\n                  </div>\n              </div>\n      `;\n        jobElement.addEventListener(\"click\", () => {\n          // Chuyển hướng đến trang chi tiết công việc với ID của công việc\n          window.location.href = `/${job.route}`;\n        });\n        jobContainer.appendChild(jobElement);\n      }\n    }\n\n    getRelatedJob();\n  </script>", "doctype": "Page Section", "content": [{"name": "5d6f0819b5", "owner": "Administrator", "creation": "2024-10-10 10:49:54.511475", "modified": "2024-10-16 14:52:31.301792", "modified_by": "Administrator", "docstatus": 0, "idx": 1, "field_label": "Tiêu đề", "field_key": "title", "field_type": "Text", "content_type": "Data", "allow_update_to_style": 0, "content": "Việc làm liên quan", "parent": "PS-24-0000013864", "parentfield": "content", "parenttype": "Page Section", "doctype": "Section Content"}, {"name": "d2d0b54b2d", "owner": "Administrator", "creation": "2024-10-10 10:49:54.511475", "modified": "2024-10-16 14:52:31.301792", "modified_by": "Administrator", "docstatus": 0, "idx": 2, "field_label": "Chú thích", "field_key": "note", "field_type": "Text", "content_type": "Data", "allow_update_to_style": 0, "parent": "PS-24-0000013864", "parentfield": "content", "parenttype": "Page Section", "doctype": "Section Content"}], "section_column_css": [], "column_index": 1}]